import{d as j,u as E,o as I,a as U,e as C,K as v,g as u,k as e,t as o,h as a,n as V,m as T,i as f,j as x,x as S,E as d,H as m,f as L,b as z,T as D,r as M}from"./index-7FrspKv6.js";import{u as F}from"./user-CfeTsN2J.js";import{P as $}from"./PersonalCenterLayout-DSVWC8lB.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"space-y-8 animate-fade-in"},J={class:"text-2xl font-bold text-text-primary"},K={class:"flex border-b border-border"},O={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-text-primary"},A={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-text-primary"},G={key:0,class:"max-w-2xl space-y-6"},Q={class:"flex items-center gap-6 mb-8"},R={class:"w-24 h-24 rounded-full bg-surface-secondary overflow-hidden relative group cursor-pointer"},W=["src"],X={class:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},Y={class:"text-white text-xs"},Z={class:"font-bold text-lg text-text-primary"},ee={class:"text-text-secondary text-sm"},te={class:"block text-sm font-medium text-text-secondary mb-2"},se={class:"block text-sm font-medium text-text-secondary mb-2"},oe={class:"block text-sm font-medium text-text-secondary mb-2"},ae={class:"block text-sm font-medium text-text-secondary mb-2"},re={class:"pt-4"},ne={type:"submit",class:"btn-primary px-6 py-2 rounded-lg text-sm"},le={key:1,class:"max-w-2xl space-y-6"},ie={class:"block text-sm font-medium text-text-secondary mb-2"},ce={class:"block text-sm font-medium text-text-secondary mb-2"},ue={class:"block text-sm font-medium text-text-secondary mb-2"},de={key:0,class:"text-error text-xs mt-1"},me={class:"pt-4"},pe={type:"submit",class:"btn-primary px-6 py-2 rounded-lg text-sm"},fe={key:0,class:"fixed top-24 right-5 z-[9999] flex items-center gap-3 bg-surface dark:bg-[#2c2c2e] border border-border dark:border-white/10 shadow-lg rounded-xl p-4 max-w-sm pointer-events-auto"},xe={class:"font-bold text-text-primary text-sm"},be={class:"text-sm text-text-secondary mt-0.5"},ye=j({__name:"UserProfile",setup(ve){const{t:s}=E(),l=F(),c=M("basic"),b=M(""),r=v({username:"",name:"",email:"",phone:""}),i=v({current:"",new:"",confirm:""}),p=v({show:!1,message:""});let y=null;const _=h=>{p.message=h,p.show=!0,y&&clearTimeout(y),y=setTimeout(()=>{p.show=!1},3e3)},N=()=>{p.show=!1,y&&clearTimeout(y)};I(()=>{l.user&&(r.username=l.user.username,r.name=l.user.name,r.email=l.user.email||"",r.phone=l.user.phone||"")});const B=()=>{l.user&&(l.user.name=r.name,l.user.email=r.email,l.user.phone=r.phone,localStorage.setItem("user",JSON.stringify(l.user)),_(s("common.save")+" "+s("common.success","Success")))},P=()=>{if(b.value="",i.new!==i.confirm){b.value=s("profile.password_mismatch");return}if(!i.current||!i.new){b.value=s("profile.password_required");return}_(s("common.success")),i.current="",i.new="",i.confirm=""};return(h,t)=>(u(),U($,{"bg-class":"bg-white"},{default:C(()=>{var w,g,k;return[e("div",H,[e("h1",J,o(a(s)("profile.title")),1),e("div",K,[e("button",{onClick:t[0]||(t[0]=n=>c.value="basic"),class:V(["px-6 py-3 text-sm font-medium transition-colors relative",c.value==="basic"?"text-text-primary":"text-text-secondary hover:text-text-primary"])},[T(o(a(s)("profile.basic_info"))+" ",1),c.value==="basic"?(u(),f("span",O)):x("",!0)],2),e("button",{onClick:t[1]||(t[1]=n=>c.value="security"),class:V(["px-6 py-3 text-sm font-medium transition-colors relative",c.value==="security"?"text-text-primary":"text-text-secondary hover:text-text-primary"])},[T(o(a(s)("profile.security"))+" ",1),c.value==="security"?(u(),f("span",A)):x("",!0)],2)]),c.value==="basic"?(u(),f("div",G,[e("div",Q,[e("div",R,[e("img",{src:((w=a(l).user)==null?void 0:w.avatar)||"https://ui-avatars.com/api/?name=User",class:"w-full h-full object-cover"},null,8,W),e("div",X,[e("span",Y,o(a(s)("common.edit")),1)])]),e("div",null,[e("h3",Z,o(((g=a(l).user)==null?void 0:g.name)||"User"),1),e("p",ee,o(((k=a(l).user)==null?void 0:k.role)||"Member"),1)])]),e("form",{onSubmit:S(B,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",te,o(a(s)("profile.username")),1),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>r.username=n),type:"text",class:"input-field",disabled:""},null,512),[[m,r.username]])]),e("div",null,[e("label",se,o(a(s)("profile.name")),1),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>r.name=n),type:"text",class:"input-field"},null,512),[[m,r.name]])]),e("div",null,[e("label",oe,o(a(s)("profile.email")),1),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>r.email=n),type:"email",class:"input-field"},null,512),[[m,r.email]])]),e("div",null,[e("label",ae,o(a(s)("profile.phone")),1),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>r.phone=n),type:"tel",class:"input-field"},null,512),[[m,r.phone]])]),e("div",re,[e("button",ne,o(a(s)("common.save")),1)])],32)])):x("",!0),c.value==="security"?(u(),f("div",le,[e("form",{onSubmit:S(P,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",ie,o(a(s)("profile.current_password")),1),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>i.current=n),type:"password",class:"input-field"},null,512),[[m,i.current]])]),e("div",null,[e("label",ce,o(a(s)("profile.new_password")),1),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>i.new=n),type:"password",class:"input-field"},null,512),[[m,i.new]])]),e("div",null,[e("label",ue,o(a(s)("profile.confirm_password")),1),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>i.confirm=n),type:"password",class:"input-field"},null,512),[[m,i.confirm]]),b.value?(u(),f("p",de,o(b.value),1)):x("",!0)]),e("div",me,[e("button",pe,o(a(s)("profile.update_password")),1)])],32)])):x("",!0)]),(u(),U(L,{to:"body"},[z(D,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[p.show?(u(),f("div",fe,[t[10]||(t[10]=e("div",{class:"p-2 bg-success/10 rounded-full text-success shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",null,[e("h4",xe,o(a(s)("common.success")||"Success"),1),e("p",be,o(p.message),1)]),e("button",{onClick:N,class:"ml-4 text-text-tertiary hover:text-text-primary transition-colors"},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):x("",!0)]),_:1})]))]}),_:1}))}}),ke=q(ye,[["__scopeId","data-v-a8da60ac"]]);export{ke as default};
