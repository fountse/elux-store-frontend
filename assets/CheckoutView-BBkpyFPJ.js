import{d as C,u as M,m as N,g as c,i as e,f as s,t as r,B as l,C as m,n as b,h as p,I as A,z,J as g,F as j,r as $,j as q,l as B,K as w,c as S,o as u}from"./index-Cf3Z8cN2.js";import{u as I}from"./cart-CMVz_qvR.js";import{u as L}from"./order-ChHqdD4I.js";import{u as F}from"./user-DgN10sy1.js";import{f as h,g as D}from"./index-BvOmRYqU.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"min-h-screen bg-page pb-12"},Z={class:"sticky top-0 z-50 bg-page/80 backdrop-blur-md border-b border-border mb-8"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center"},O={class:"font-medium"},T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={class:"text-3xl font-bold text-text-primary mb-10"},G={class:"grid grid-cols-1 lg:grid-cols-12 gap-12"},J={class:"lg:col-span-7 space-y-10"},P={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},W={class:"grid grid-cols-1 gap-6"},X={class:"block text-sm font-medium text-text-secondary mb-2"},H={key:0,class:"mt-1 text-sm text-red-500"},Q={class:"block text-sm font-medium text-text-secondary mb-2"},ee={key:0,class:"mt-1 text-sm text-red-500"},te={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},oe={class:"grid grid-cols-2 gap-6"},se={class:"col-span-2"},re={class:"block text-sm font-medium text-text-secondary mb-2"},ne={class:"block text-sm font-medium text-text-secondary mb-2"},ae={key:0,class:"mt-1 text-sm text-red-500"},ie={class:"block text-sm font-medium text-text-secondary mb-2"},de={key:0,class:"mt-1 text-sm text-red-500"},le={class:"col-span-2"},ce={class:"block text-sm font-medium text-text-secondary mb-2"},ue=["placeholder"],pe={key:0,class:"mt-1 text-sm text-red-500"},me={class:"col-span-2"},be=["placeholder"],xe={class:"block text-sm font-medium text-text-secondary mb-2"},fe={key:0,class:"mt-1 text-sm text-red-500"},ye={class:"grid grid-cols-2 gap-4"},he={class:"block text-sm font-medium text-text-secondary mb-2"},_e={key:0,class:"mt-1 text-sm text-red-500"},ge={class:"block text-sm font-medium text-text-secondary mb-2"},ve={key:0,class:"mt-1 text-sm text-red-500"},ke={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},we={class:"space-y-4"},Se={class:"flex items-center space-x-3 cursor-pointer"},Ue={class:"text-text-secondary"},Ve={class:"flex items-center space-x-3 cursor-pointer"},Ce={class:"text-text-secondary"},Me={key:0,class:"mt-6 p-6 bg-surface-secondary border border-border animate-fade-in"},Ne={class:"grid grid-cols-2 gap-6"},Ae={class:"col-span-2"},ze={class:"block text-sm font-medium text-text-secondary mb-2"},je={class:"block text-sm font-medium text-text-secondary mb-2"},$e={class:"block text-sm font-medium text-text-secondary mb-2"},qe={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},Be={class:"text-sm text-text-tertiary mb-4"},Ie={class:"space-y-4"},Le={class:"flex items-center justify-between"},Fe={class:"flex items-center gap-3"},De={class:"font-medium text-text-primary"},Ee={key:0,class:"mt-4 grid grid-cols-2 gap-4"},Re={class:"flex items-center justify-between"},Ze={class:"flex items-center gap-3"},Ke=["disabled"],Oe={class:"font-medium block text-text-primary"},Te={class:"text-xs text-text-tertiary"},Ye={key:0,class:"mt-2 text-xs text-red-500"},Ge={key:0,class:"mt-2 text-sm text-red-500"},Je={class:"lg:col-span-5"},Pe={class:"bg-surface-secondary p-8 border border-border sticky top-32 z-10"},We={class:"text-lg font-bold text-text-primary mb-6"},Xe={class:"space-y-4 mb-6 max-h-96 overflow-y-auto pr-2"},He={class:"w-16 h-20 bg-surface border border-border flex-shrink-0 relative"},Qe=["src"],et={class:"flex-grow"},tt={class:"text-sm font-medium text-text-primary line-clamp-2"},ot={class:"text-xs text-text-secondary mt-1"},st={class:"text-xs text-text-secondary mt-1"},rt={class:"text-sm font-medium text-text-primary"},nt={class:"space-y-3 pt-4 border-t border-border text-sm"},at={class:"flex justify-between text-text-secondary"},it={class:"flex justify-between text-text-secondary"},dt={class:"text-green-600"},lt={class:"flex justify-between text-text-secondary"},ct={class:"flex justify-between items-center mt-6 pt-6 border-t border-border"},ut={class:"text-lg font-bold text-text-primary"},pt={class:"text-right"},mt={class:"text-2xl font-bold text-text-primary"},bt=["disabled"],xt={key:0,class:"animate-spin mr-2"},ft=C({__name:"CheckoutView",setup(yt){const{t:a}=M(),f=I(),_=L(),x=F(),v=B(),t=w({email:"",phone:"",firstName:"",lastName:"",address:"",apartment:"",city:"",country:"US",state:"",zip:"",billingSameAsShipping:!0,billingAddress:"",billingCity:"",billingZip:"",paymentMethod:"card"}),i=w({});N(()=>{if(f.items.length===0){v.push("/products");return}if(x.user){t.email=x.user.email||"",t.phone=x.user.phone||"";const d=x.user.name.split(" ");d.length>0&&(t.firstName=d[0]),d.length>1&&(t.lastName=d.slice(1).join(" "))}});const k=S(()=>!x.user||x.user.creditLimit===void 0?0:(x.user.creditLimit||0)-(x.user.usedCredit||0)),y=S(()=>k.value>=f.total),U=()=>{Object.keys(i).forEach(o=>delete i[o]);let d=!0;return(!t.email||!t.email.includes("@"))&&(i.email=a("validation.email_required"),d=!1),t.firstName||(i.firstName=a("validation.first_name_required"),d=!1),t.lastName||(i.lastName=a("validation.last_name_required"),d=!1),t.address||(i.address=a("validation.address_required"),d=!1),t.city||(i.city=a("validation.city_required"),d=!1),t.state||(i.state=a("validation.state_required"),d=!1),t.zip||(i.zip=a("validation.zip_required"),d=!1),t.paymentMethod||(i.paymentMethod=a("validation.payment_method_required"),d=!1),d},V=async()=>{if(!U()){window.scrollTo({top:0,behavior:"smooth"});return}const d=`${t.address}, ${t.apartment?t.apartment+", ":""}${t.city}, ${t.state} ${t.zip}, ${t.country}`,o=t.billingSameAsShipping?d:`${t.billingAddress}, ${t.billingCity} ${t.billingZip}`,n=await _.createOrder(d,o,t.paymentMethod);n&&v.push({name:"checkout-success",query:{orderId:n.id}})};return(d,o)=>(u(),c("div",R,[e("div",Z,[e("div",K,[e("button",{onClick:o[0]||(o[0]=n=>s(v).back()),class:"flex items-center gap-2 text-text-secondary hover:text-text-primary transition-colors group"},[o[20]||(o[20]=e("svg",{class:"w-5 h-5 transform group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),e("span",O,r(s(a)("common.back")),1)])])]),e("div",T,[e("h1",Y,r(s(a)("checkout.title")),1),e("div",G,[e("div",J,[e("section",null,[e("h2",P,r(s(a)("checkout.contact_info")),1),e("div",W,[e("div",null,[e("label",X,r(s(a)("checkout.email")),1),l(e("input",{"onUpdate:modelValue":o[1]||(o[1]=n=>t.email=n),type:"email",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.email}]),placeholder:"email@example.com"},null,2),[[m,t.email]]),i.email?(u(),c("p",H,r(i.email),1)):p("",!0)]),e("div",null,[e("label",Q,r(s(a)("checkout.phone")),1),l(e("input",{"onUpdate:modelValue":o[2]||(o[2]=n=>t.phone=n),type:"tel",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.phone}]),placeholder:"+1 (555) 000-0000"},null,2),[[m,t.phone]]),i.phone?(u(),c("p",ee,r(i.phone),1)):p("",!0)])])]),e("section",null,[e("h2",te,r(s(a)("checkout.shipping_address")),1),e("div",oe,[e("div",se,[e("label",re,r(s(a)("checkout.country")),1),l(e("select",{"onUpdate:modelValue":o[3]||(o[3]=n=>t.country=n),class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors appearance-none"},[...o[21]||(o[21]=[z('<option value="US" data-v-0ccbaf4b>United States</option><option value="UK" data-v-0ccbaf4b>United Kingdom</option><option value="CA" data-v-0ccbaf4b>Canada</option><option value="AU" data-v-0ccbaf4b>Australia</option><option value="DE" data-v-0ccbaf4b>Germany</option><option value="FR" data-v-0ccbaf4b>France</option>',6)])],512),[[A,t.country]])]),e("div",null,[e("label",ne,r(s(a)("checkout.first_name")),1),l(e("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>t.firstName=n),type:"text",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.firstName}])},null,2),[[m,t.firstName]]),i.firstName?(u(),c("p",ae,r(i.firstName),1)):p("",!0)]),e("div",null,[e("label",ie,r(s(a)("checkout.last_name")),1),l(e("input",{"onUpdate:modelValue":o[5]||(o[5]=n=>t.lastName=n),type:"text",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.lastName}])},null,2),[[m,t.lastName]]),i.lastName?(u(),c("p",de,r(i.lastName),1)):p("",!0)]),e("div",le,[e("label",ce,r(s(a)("checkout.address")),1),l(e("input",{"onUpdate:modelValue":o[6]||(o[6]=n=>t.address=n),type:"text",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.address}]),placeholder:s(a)("checkout.address_placeholder")},null,10,ue),[[m,t.address]]),i.address?(u(),c("p",pe,r(i.address),1)):p("",!0)]),e("div",me,[l(e("input",{"onUpdate:modelValue":o[7]||(o[7]=n=>t.apartment=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",placeholder:s(a)("checkout.apartment_placeholder")},null,8,be),[[m,t.apartment]])]),e("div",null,[e("label",xe,r(s(a)("checkout.city")),1),l(e("input",{"onUpdate:modelValue":o[8]||(o[8]=n=>t.city=n),type:"text",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.city}])},null,2),[[m,t.city]]),i.city?(u(),c("p",fe,r(i.city),1)):p("",!0)]),e("div",ye,[e("div",null,[e("label",he,r(s(a)("checkout.state")),1),l(e("input",{"onUpdate:modelValue":o[9]||(o[9]=n=>t.state=n),type:"text",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.state}])},null,2),[[m,t.state]]),i.state?(u(),c("p",_e,r(i.state),1)):p("",!0)]),e("div",null,[e("label",ge,r(s(a)("checkout.zip")),1),l(e("input",{"onUpdate:modelValue":o[10]||(o[10]=n=>t.zip=n),type:"text",class:b(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.zip}])},null,2),[[m,t.zip]]),i.zip?(u(),c("p",ve,r(i.zip),1)):p("",!0)])])])]),e("section",null,[e("h2",ke,r(s(a)("checkout.billing_address")||"Billing Address"),1),e("div",we,[e("label",Se,[l(e("input",{type:"radio","onUpdate:modelValue":o[11]||(o[11]=n=>t.billingSameAsShipping=n),value:!0,class:"w-5 h-5 text-text-primary border-border focus:ring-text-primary"},null,512),[[g,t.billingSameAsShipping]]),e("span",Ue,r(s(a)("checkout.same_as_shipping")||"Same as shipping address"),1)]),e("label",Ve,[l(e("input",{type:"radio","onUpdate:modelValue":o[12]||(o[12]=n=>t.billingSameAsShipping=n),value:!1,class:"w-5 h-5 text-text-primary border-border focus:ring-text-primary"},null,512),[[g,t.billingSameAsShipping]]),e("span",Ce,r(s(a)("checkout.use_different_billing")||"Use a different billing address"),1)])]),t.billingSameAsShipping?p("",!0):(u(),c("div",Me,[e("div",Ne,[e("div",Ae,[e("label",ze,r(s(a)("checkout.address")),1),l(e("input",{"onUpdate:modelValue":o[13]||(o[13]=n=>t.billingAddress=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors"},null,512),[[m,t.billingAddress]])]),e("div",null,[e("label",je,r(s(a)("checkout.city")),1),l(e("input",{"onUpdate:modelValue":o[14]||(o[14]=n=>t.billingCity=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors"},null,512),[[m,t.billingCity]])]),e("div",null,[e("label",$e,r(s(a)("checkout.zip")),1),l(e("input",{"onUpdate:modelValue":o[15]||(o[15]=n=>t.billingZip=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors"},null,512),[[m,t.billingZip]])])])]))]),e("section",null,[e("h2",qe,r(s(a)("checkout.payment")),1),e("p",Be,r(s(a)("checkout.secure_transaction")),1),e("div",Ie,[e("div",{class:b(["border border-border p-4 rounded-none cursor-pointer hover:border-text-primary transition-colors",{"border-text-primary bg-surface-secondary":t.paymentMethod==="card"}]),onClick:o[17]||(o[17]=n=>t.paymentMethod="card")},[e("div",Le,[e("div",Fe,[l(e("input",{type:"radio","onUpdate:modelValue":o[16]||(o[16]=n=>t.paymentMethod=n),value:"card",class:"w-5 h-5 text-text-primary focus:ring-text-primary"},null,512),[[g,t.paymentMethod]]),e("span",De,r(s(a)("checkout.credit_card")),1)]),o[22]||(o[22]=e("div",{class:"flex gap-2"},[e("span",{class:"text-xs border px-1 border-border rounded-none text-text-secondary"},"VISA"),e("span",{class:"text-xs border px-1 border-border rounded-none text-text-secondary"},"MC"),e("span",{class:"text-xs border px-1 border-border rounded-none text-text-secondary"},"AMEX")],-1))]),t.paymentMethod==="card"?(u(),c("div",Ee,[...o[23]||(o[23]=[e("div",{class:"col-span-2"},[e("input",{type:"text",placeholder:"Card Number",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none"})],-1),e("div",null,[e("input",{type:"text",placeholder:"MM / YY",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none"})],-1),e("div",null,[e("input",{type:"text",placeholder:"CVC",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none"})],-1)])])):p("",!0)],2),e("div",{class:b(["border border-border p-4 rounded-none cursor-pointer hover:border-text-primary transition-colors",{"border-text-primary bg-surface-secondary":t.paymentMethod==="bnpl","opacity-60 pointer-events-none":!y.value}]),onClick:o[19]||(o[19]=n=>y.value&&(t.paymentMethod="bnpl"))},[e("div",Re,[e("div",Ze,[l(e("input",{type:"radio","onUpdate:modelValue":o[18]||(o[18]=n=>t.paymentMethod=n),value:"bnpl",disabled:!y.value,class:"w-5 h-5 text-text-primary focus:ring-text-primary"},null,8,Ke),[[g,t.paymentMethod]]),e("div",null,[e("span",Oe,r(s(a)("checkout.bnpl")),1),e("span",Te,r(s(a)("checkout.bnpl_desc")),1)])]),e("span",{class:b(["text-sm font-bold",y.value?"text-green-600":"text-red-500"])},r(s(a)("checkout.credit_available"))+": "+r(s(h)(k.value)),3)]),y.value?p("",!0):(u(),c("div",Ye,r(s(a)("checkout.insufficient_credit")),1))],2)]),i.paymentMethod?(u(),c("p",Ge,r(i.paymentMethod),1)):p("",!0)])]),e("div",Je,[e("div",Pe,[e("h3",We,r(s(a)("checkout.order_summary")),1),e("div",Xe,[(u(!0),c(j,null,$(s(f).items,n=>(u(),c("div",{key:n.productId,class:"flex gap-4 items-start border-b border-border/50 pb-4 last:border-0"},[e("div",He,[e("img",{src:s(D)(n.product.images[0]),class:"w-full h-full object-cover"},null,8,Qe)]),e("div",et,[e("h4",tt,r(n.product.name),1),e("p",ot,r(n.selectedVariant),1),e("p",st,"x "+r(n.quantity),1)]),e("div",rt,r(s(h)((s(x).isB2B?n.product.priceWholesale:n.product.priceRetail)*n.quantity)),1)]))),128))]),e("div",nt,[e("div",at,[e("span",null,r(s(a)("cart.subtotal")),1),e("span",null,r(s(h)(s(f).total)),1)]),e("div",it,[e("span",null,r(s(a)("cart.shipping_cost")),1),e("span",dt,r(s(a)("cart.free")),1)]),e("div",lt,[e("span",null,r(s(a)("order.tax")),1),e("span",null,r(s(h)(0)),1)])]),e("div",ct,[e("span",ut,r(s(a)("cart.total")),1),e("div",pt,[o[24]||(o[24]=e("span",{class:"text-xs text-text-secondary block"},"USD",-1)),e("span",mt,r(s(h)(s(f).total)),1)])]),e("button",{onClick:V,disabled:s(_).isLoading,class:"w-full mt-8 bg-gray-900 dark:bg-gray-200 text-white dark:text-gray-900 font-bold py-4 rounded-none border border-transparent hover:bg-black dark:hover:bg-white hover:border-black shadow-md hover:shadow-xl transition-all duration-300 disabled:opacity-50 flex justify-center items-center transform hover:-translate-y-0.5"},[s(_).isLoading?(u(),c("span",xt,"âšª")):p("",!0),q(" "+r(s(_).isLoading?s(a)("checkout.processing"):s(a)("checkout.place_order")),1)],8,bt)])])])])]))}}),St=E(ft,[["__scopeId","data-v-0ccbaf4b"]]);export{St as default};
