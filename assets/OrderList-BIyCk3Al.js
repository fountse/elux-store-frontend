import{d as B,u as I,a as f,w as $,o,i as t,t as n,f as l,E as F,H as O,g as c,r as y,n as h,j as m,h as x,F as _,b as q,y as b,l as z,x as g,c as k}from"./index-C43oMqCu.js";import{P as E}from"./PersonalCenterLayout-Bl2UJ_f_.js";import{u as U}from"./order-1VaOyrxA.js";import{g as X,f as H}from"./index-BvOmRYqU.js";import{C as Q,T as R,P as G}from"./truck-5ismMc9o.js";import{C as v}from"./check-circle-2-Df0NoGPC.js";import{A as w,X as J,C as K}from"./x-circle-DLinRkTc.js";import"./user-U-ptMv71.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./cart-0i2Idguh.js";import"./createLucideIcon-CqbYYDV9.js";const W={class:"space-y-8"},Y={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0"},Z={class:"text-2xl font-bold text-text-primary"},ee={class:"w-full sm:w-72"},te=["placeholder"],se={class:"flex border-b border-gray-200 dark:border-white/[0.02] overflow-x-auto whitespace-nowrap scrollbar-hide"},ae=["onClick"],re={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-text-primary"},oe={class:"space-y-4 sm:space-y-6"},ne=["onClick"],le={class:"flex flex-col sm:flex-row justify-between gap-6"},ce={class:"flex-1 flex flex-col gap-4"},ie={class:"flex flex-wrap items-baseline gap-4"},de={class:"text-text-secondary flex items-baseline gap-2"},pe={class:"text-text-primary font-medium text-lg break-all"},ue={class:"text-xs text-text-tertiary"},me={class:"space-y-3"},xe={class:"w-12 h-12 bg-surface-secondary dark:bg-black/20 rounded flex-shrink-0 border border-gray-100 dark:border-white/[0.02]"},fe=["src"],ye={class:"flex-1 flex flex-col justify-center min-h-[3rem]"},he={class:"flex items-baseline gap-2"},_e={class:"text-sm text-text-primary line-clamp-2 leading-tight"},be={class:"text-sm text-text-primary"},ge={key:0,class:"text-xs text-text-secondary mt-0.5"},ke={class:"flex flex-col items-end justify-between gap-4 min-w-[200px]"},ve={class:"flex flex-wrap justify-end gap-2 items-center"},we={key:0,class:"px-2 py-1 text-[11px] font-bold rounded-md text-error flex items-center gap-1"},Ce={class:"flex gap-2 mt-auto items-baseline"},Pe={class:"text-sm text-text-secondary"},je={class:"text-lg font-bold text-text-primary"},Oe=B({__name:"OrderList",setup(Le){const{t:r}=I(),C=z(),P=U(),j=e=>{if(!e)return"";const a=new Date(e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a)},p=g(""),L=k(()=>[{key:"all",label:r("order.tabs.all")},{key:"pending",label:r("order.tabs.pending")},{key:"processing",label:r("order.tabs.processing")||"Processing"},{key:"shipped",label:r("order.tabs.shipping")},{key:"delivered",label:r("order.tabs.completed")},{key:"cancelled",label:r("order.tabs.cancelled")}]),d=g("all"),S=k(()=>{let e=P.orders;if(d.value!=="all"&&(e=e.filter(a=>a.status===d.value)),p.value){const a=p.value.toLowerCase();e=e.filter(s=>s.id.toLowerCase().includes(a)||s.items.some(i=>i.product.name.toLowerCase().includes(a)))}return e}),V=e=>r(`order.tabs.${{shipped:"shipping",delivered:"completed"}[e]||e}`),D=e=>{switch(e){case"pending":return"text-warning";case"processing":return"text-info";case"shipped":return"text-accent";case"delivered":return"text-success";case"cancelled":return"text-error";default:return"text-text-secondary"}},T=e=>{switch(e){case"pending":return K;case"processing":return G;case"shipped":return R;case"delivered":return v;case"cancelled":return J;default:return w}},u=e=>{const a=e==null?void 0:e.paymentStatus;return a==="paid"||a==="unpaid"?a:(e==null?void 0:e.paymentMethod)==="postpay"?"unpaid":null},M=e=>{const a=e;return(a==null?void 0:a.paymentMethod)==="postpay"||!!(a!=null&&a.isPostpay)||!!(a!=null&&a.postpay)},N=e=>e==="paid"?"text-success":"text-error";return(e,a)=>(o(),f(E,{"bg-class":"bg-white"},{default:$(()=>[t("div",W,[t("div",Y,[t("h1",Z,n(l(r)("order.title")),1),t("div",ee,[F(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>p.value=s),type:"text",placeholder:l(r)("common.search_placeholder"),class:"w-full border border-gray-200 dark:border-transparent px-4 py-2 text-sm bg-surface dark:bg-[#2c2c2e] text-text-primary focus:border-text-primary outline-none transition-colors"},null,8,te),[[O,p.value]])])]),t("div",se,[(o(!0),c(_,null,y(L.value,s=>(o(),c("button",{key:s.key,onClick:i=>d.value=s.key,class:h(["px-6 py-3 text-sm font-medium transition-colors relative flex-shrink-0",d.value===s.key?"text-text-primary":"text-text-secondary hover:text-text-primary"])},[m(n(s.label)+" ",1),d.value===s.key?(o(),c("span",re)):x("",!0)],10,ae))),128))]),t("div",oe,[(o(!0),c(_,null,y(S.value,s=>(o(),c("div",{key:s.id,onClick:i=>l(C).push(`/user/orders/${s.id}`),class:"relative p-6 bg-surface dark:bg-[#2c2c2e] cursor-pointer border border-gray-100 dark:border-transparent hover:border-text-secondary dark:hover:border-white/10 transition-colors shadow-sm dark:shadow-none"},[t("div",le,[t("div",ce,[t("div",ie,[t("p",de,[t("span",pe,n(s.id),1),t("span",ue,n(j(s.createdAt)),1)])]),t("div",me,[(o(!0),c(_,null,y(s.items,(i,A)=>(o(),c("div",{key:A,class:"flex items-start gap-3"},[t("div",xe,[t("img",{src:l(X)(i.product.images[0]),class:"w-full h-full object-contain mix-blend-multiply dark:mix-blend-normal"},null,8,fe)]),t("div",ye,[t("div",he,[t("p",_e,n(i.product.name),1),t("span",be,"x"+n(i.quantity),1)]),i.selectedVariant?(o(),c("p",ge,n(i.selectedVariant),1)):x("",!0)])]))),128))])]),t("div",ke,[t("div",ve,[M(s)?(o(),c("span",we,[q(l(Q),{class:"w-3.5 h-3.5"}),m(" "+n(l(r)("order.postpay")||"先发后付"),1)])):x("",!0),u(s)?(o(),c("span",{key:1,class:h(["px-2 py-1 text-[11px] font-bold rounded-md flex items-center gap-1",N(u(s))])},[(o(),f(b(u(s)==="paid"?l(v):l(w)),{class:"w-3.5 h-3.5"})),m(" "+n(u(s)==="paid"?l(r)("order.paid")||"已支付":l(r)("order.unpaid")||"待支付"),1)],2)):x("",!0),t("span",{class:h(["px-2 py-1 text-[11px] font-bold rounded-md flex items-center gap-1",D(s.status)])},[(o(),f(b(T(s.status)),{class:"w-3.5 h-3.5"})),m(" "+n(V(s.status)),1)],2)]),t("div",Ce,[t("span",Pe,n(l(r)("order.actual_payment")||"实付款")+":",1),t("span",je,n(l(H)(s.totalAmount)),1)])])])],8,ne))),128))])])]),_:1}))}});export{Oe as default};
