import{d as N,u as C,o as M,i as c,k as e,t as o,h as r,E as l,H as m,n as x,j as p,I as A,A as z,J as g,F as q,l as j,m as $,q as B,K as w,c as S,g as u}from"./index-7FrspKv6.js";import{u as I}from"./cart-sC7J0G5z.js";import{u as L}from"./order-qhxHp8qg.js";import{u as F}from"./user-CfeTsN2J.js";import{f as _,g as E}from"./index-BvOmRYqU.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"min-h-screen bg-page pb-12 pt-8"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},K={class:"text-3xl font-bold text-text-primary mb-10"},O={class:"grid grid-cols-1 lg:grid-cols-12 gap-12"},T={class:"lg:col-span-7 space-y-10"},Y={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},G={class:"grid grid-cols-1 gap-6"},H={class:"block text-sm font-medium text-text-secondary mb-2"},J={key:0,class:"mt-1 text-sm text-red-500"},P={class:"block text-sm font-medium text-text-secondary mb-2"},W={key:0,class:"mt-1 text-sm text-red-500"},X={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},Q={class:"grid grid-cols-2 gap-6"},ee={class:"col-span-2"},te={class:"block text-sm font-medium text-text-secondary mb-2"},se={class:"block text-sm font-medium text-text-secondary mb-2"},oe={key:0,class:"mt-1 text-sm text-red-500"},re={class:"block text-sm font-medium text-text-secondary mb-2"},ne={key:0,class:"mt-1 text-sm text-red-500"},de={class:"col-span-2"},ie={class:"block text-sm font-medium text-text-secondary mb-2"},ae=["placeholder"],le={key:0,class:"mt-1 text-sm text-red-500"},ce={class:"col-span-2"},ue=["placeholder"],pe={class:"block text-sm font-medium text-text-secondary mb-2"},me={key:0,class:"mt-1 text-sm text-red-500"},xe={class:"grid grid-cols-2 gap-4"},be={class:"block text-sm font-medium text-text-secondary mb-2"},fe={key:0,class:"mt-1 text-sm text-red-500"},ye={class:"block text-sm font-medium text-text-secondary mb-2"},_e={key:0,class:"mt-1 text-sm text-red-500"},he={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},ge={class:"space-y-4"},ve={class:"flex items-center space-x-3 cursor-pointer"},ke={class:"text-text-secondary"},we={class:"flex items-center space-x-3 cursor-pointer"},Se={class:"text-text-secondary"},Ue={key:0,class:"mt-6 p-6 bg-surface-secondary border border-border animate-fade-in"},Ve={class:"grid grid-cols-2 gap-6"},Ne={class:"col-span-2"},Ce={class:"block text-sm font-medium text-text-secondary mb-2"},Me={class:"block text-sm font-medium text-text-secondary mb-2"},Ae={class:"block text-sm font-medium text-text-secondary mb-2"},ze={class:"text-xl font-bold text-text-primary mb-6 border-b border-border pb-2"},qe={class:"text-sm text-text-tertiary mb-4"},je={class:"space-y-4"},$e={class:"flex items-center justify-between"},Be={class:"flex items-center gap-3"},Ie={class:"font-medium text-text-primary"},Le={key:0,class:"mt-4 grid grid-cols-2 gap-4"},Fe={class:"flex items-center justify-between"},Ee={class:"flex items-center gap-3"},De=["disabled"],Re={class:"font-medium block text-text-primary"},Ze={class:"text-xs text-text-tertiary"},Ke={key:0,class:"mt-2 text-xs text-red-500"},Oe={key:0,class:"mt-2 text-sm text-red-500"},Te={class:"lg:col-span-5"},Ye={class:"bg-surface-secondary p-8 border border-border sticky top-32 z-10"},Ge={class:"text-lg font-bold text-text-primary mb-6"},He={class:"space-y-4 mb-6 max-h-96 overflow-y-auto pr-2"},Je={class:"w-16 h-20 bg-surface border border-border flex-shrink-0 relative"},Pe=["src"],We={class:"flex-grow"},Xe={class:"text-sm font-medium text-text-primary line-clamp-2"},Qe={class:"text-xs text-text-secondary mt-1"},et={class:"text-xs text-text-secondary mt-1"},tt={class:"text-sm font-medium text-text-primary"},st={class:"space-y-3 pt-4 border-t border-border text-sm"},ot={class:"flex justify-between text-text-secondary"},rt={class:"flex justify-between text-text-secondary"},nt={class:"text-green-600"},dt={class:"flex justify-between text-text-secondary"},it={class:"flex justify-between items-center mt-6 pt-6 border-t border-border"},at={class:"text-lg font-bold text-text-primary"},lt={class:"text-right"},ct={class:"text-2xl font-bold text-text-primary"},ut=["disabled"],pt={key:0,class:"animate-spin mr-2"},mt=N({__name:"CheckoutView",setup(xt){const{t:d}=C(),f=I(),h=L(),b=F(),v=B(),t=w({email:"",phone:"",firstName:"",lastName:"",address:"",apartment:"",city:"",country:"US",state:"",zip:"",billingSameAsShipping:!0,billingAddress:"",billingCity:"",billingZip:"",paymentMethod:"card"}),i=w({});M(()=>{if(f.items.length===0){v.push("/products");return}if(b.user){t.email=b.user.email||"",t.phone=b.user.phone||"";const a=b.user.name.split(" ");a.length>0&&(t.firstName=a[0]),a.length>1&&(t.lastName=a.slice(1).join(" "))}});const k=S(()=>!b.user||b.user.creditLimit===void 0?0:(b.user.creditLimit||0)-(b.user.usedCredit||0)),y=S(()=>k.value>=f.total),U=()=>{Object.keys(i).forEach(s=>delete i[s]);let a=!0;return(!t.email||!t.email.includes("@"))&&(i.email=d("validation.email_required"),a=!1),t.firstName||(i.firstName=d("validation.first_name_required"),a=!1),t.lastName||(i.lastName=d("validation.last_name_required"),a=!1),t.address||(i.address=d("validation.address_required"),a=!1),t.city||(i.city=d("validation.city_required"),a=!1),t.state||(i.state=d("validation.state_required"),a=!1),t.zip||(i.zip=d("validation.zip_required"),a=!1),t.paymentMethod||(i.paymentMethod=d("validation.payment_method_required"),a=!1),a},V=async()=>{if(!U()){window.scrollTo({top:0,behavior:"smooth"});return}const a=`${t.address}, ${t.apartment?t.apartment+", ":""}${t.city}, ${t.state} ${t.zip}, ${t.country}`,s=t.billingSameAsShipping?a:`${t.billingAddress}, ${t.billingCity} ${t.billingZip}`,n=await h.createOrder(a,s,t.paymentMethod);n&&v.push({name:"checkout-success",query:{orderId:n.id}})};return(a,s)=>(u(),c("div",R,[e("div",Z,[e("h1",K,o(r(d)("checkout.title")),1),e("div",O,[e("div",T,[e("section",null,[e("h2",Y,o(r(d)("checkout.contact_info")),1),e("div",G,[e("div",null,[e("label",H,o(r(d)("checkout.email")),1),l(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>t.email=n),type:"email",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.email}]),placeholder:"email@example.com"},null,2),[[m,t.email]]),i.email?(u(),c("p",J,o(i.email),1)):p("",!0)]),e("div",null,[e("label",P,o(r(d)("checkout.phone")),1),l(e("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>t.phone=n),type:"tel",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.phone}]),placeholder:"+1 (555) 000-0000"},null,2),[[m,t.phone]]),i.phone?(u(),c("p",W,o(i.phone),1)):p("",!0)])])]),e("section",null,[e("h2",X,o(r(d)("checkout.shipping_address")),1),e("div",Q,[e("div",ee,[e("label",te,o(r(d)("checkout.country")),1),l(e("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>t.country=n),class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors appearance-none"},[...s[19]||(s[19]=[z('<option value="US" data-v-b0d6ed93>United States</option><option value="UK" data-v-b0d6ed93>United Kingdom</option><option value="CA" data-v-b0d6ed93>Canada</option><option value="AU" data-v-b0d6ed93>Australia</option><option value="DE" data-v-b0d6ed93>Germany</option><option value="FR" data-v-b0d6ed93>France</option>',6)])],512),[[A,t.country]])]),e("div",null,[e("label",se,o(r(d)("checkout.first_name")),1),l(e("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>t.firstName=n),type:"text",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.firstName}])},null,2),[[m,t.firstName]]),i.firstName?(u(),c("p",oe,o(i.firstName),1)):p("",!0)]),e("div",null,[e("label",re,o(r(d)("checkout.last_name")),1),l(e("input",{"onUpdate:modelValue":s[4]||(s[4]=n=>t.lastName=n),type:"text",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.lastName}])},null,2),[[m,t.lastName]]),i.lastName?(u(),c("p",ne,o(i.lastName),1)):p("",!0)]),e("div",de,[e("label",ie,o(r(d)("checkout.address")),1),l(e("input",{"onUpdate:modelValue":s[5]||(s[5]=n=>t.address=n),type:"text",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.address}]),placeholder:r(d)("checkout.address_placeholder")},null,10,ae),[[m,t.address]]),i.address?(u(),c("p",le,o(i.address),1)):p("",!0)]),e("div",ce,[l(e("input",{"onUpdate:modelValue":s[6]||(s[6]=n=>t.apartment=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",placeholder:r(d)("checkout.apartment_placeholder")},null,8,ue),[[m,t.apartment]])]),e("div",null,[e("label",pe,o(r(d)("checkout.city")),1),l(e("input",{"onUpdate:modelValue":s[7]||(s[7]=n=>t.city=n),type:"text",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.city}])},null,2),[[m,t.city]]),i.city?(u(),c("p",me,o(i.city),1)):p("",!0)]),e("div",xe,[e("div",null,[e("label",be,o(r(d)("checkout.state")),1),l(e("input",{"onUpdate:modelValue":s[8]||(s[8]=n=>t.state=n),type:"text",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.state}])},null,2),[[m,t.state]]),i.state?(u(),c("p",fe,o(i.state),1)):p("",!0)]),e("div",null,[e("label",ye,o(r(d)("checkout.zip")),1),l(e("input",{"onUpdate:modelValue":s[9]||(s[9]=n=>t.zip=n),type:"text",class:x(["w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors",{"border-red-500":i.zip}])},null,2),[[m,t.zip]]),i.zip?(u(),c("p",_e,o(i.zip),1)):p("",!0)])])])]),e("section",null,[e("h2",he,o(r(d)("checkout.billing_address")||"Billing Address"),1),e("div",ge,[e("label",ve,[l(e("input",{type:"radio","onUpdate:modelValue":s[10]||(s[10]=n=>t.billingSameAsShipping=n),value:!0,class:"w-5 h-5 text-text-primary border-border focus:ring-text-primary"},null,512),[[g,t.billingSameAsShipping]]),e("span",ke,o(r(d)("checkout.same_as_shipping")||"Same as shipping address"),1)]),e("label",we,[l(e("input",{type:"radio","onUpdate:modelValue":s[11]||(s[11]=n=>t.billingSameAsShipping=n),value:!1,class:"w-5 h-5 text-text-primary border-border focus:ring-text-primary"},null,512),[[g,t.billingSameAsShipping]]),e("span",Se,o(r(d)("checkout.use_different_billing")||"Use a different billing address"),1)])]),t.billingSameAsShipping?p("",!0):(u(),c("div",Ue,[e("div",Ve,[e("div",Ne,[e("label",Ce,o(r(d)("checkout.address")),1),l(e("input",{"onUpdate:modelValue":s[12]||(s[12]=n=>t.billingAddress=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors"},null,512),[[m,t.billingAddress]])]),e("div",null,[e("label",Me,o(r(d)("checkout.city")),1),l(e("input",{"onUpdate:modelValue":s[13]||(s[13]=n=>t.billingCity=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors"},null,512),[[m,t.billingCity]])]),e("div",null,[e("label",Ae,o(r(d)("checkout.zip")),1),l(e("input",{"onUpdate:modelValue":s[14]||(s[14]=n=>t.billingZip=n),type:"text",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none transition-colors"},null,512),[[m,t.billingZip]])])])]))]),e("section",null,[e("h2",ze,o(r(d)("checkout.payment")),1),e("p",qe,o(r(d)("checkout.secure_transaction")),1),e("div",je,[e("div",{class:x(["border border-border p-4 rounded-none cursor-pointer hover:border-text-primary transition-colors",{"border-text-primary bg-surface-secondary":t.paymentMethod==="card"}]),onClick:s[16]||(s[16]=n=>t.paymentMethod="card")},[e("div",$e,[e("div",Be,[l(e("input",{type:"radio","onUpdate:modelValue":s[15]||(s[15]=n=>t.paymentMethod=n),value:"card",class:"w-5 h-5 text-text-primary focus:ring-text-primary"},null,512),[[g,t.paymentMethod]]),e("span",Ie,o(r(d)("checkout.credit_card")),1)]),s[20]||(s[20]=e("div",{class:"flex gap-2"},[e("span",{class:"text-xs border px-1 border-border rounded-none text-text-secondary"},"VISA"),e("span",{class:"text-xs border px-1 border-border rounded-none text-text-secondary"},"MC"),e("span",{class:"text-xs border px-1 border-border rounded-none text-text-secondary"},"AMEX")],-1))]),t.paymentMethod==="card"?(u(),c("div",Le,[...s[21]||(s[21]=[e("div",{class:"col-span-2"},[e("input",{type:"text",placeholder:"Card Number",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none"})],-1),e("div",null,[e("input",{type:"text",placeholder:"MM / YY",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none"})],-1),e("div",null,[e("input",{type:"text",placeholder:"CVC",class:"w-full bg-surface border border-border rounded-none px-4 py-3 text-text-primary focus:border-text-primary focus:ring-0 focus:outline-none"})],-1)])])):p("",!0)],2),e("div",{class:x(["border border-border p-4 rounded-none cursor-pointer hover:border-text-primary transition-colors",{"border-text-primary bg-surface-secondary":t.paymentMethod==="bnpl","opacity-60 pointer-events-none":!y.value}]),onClick:s[18]||(s[18]=n=>y.value&&(t.paymentMethod="bnpl"))},[e("div",Fe,[e("div",Ee,[l(e("input",{type:"radio","onUpdate:modelValue":s[17]||(s[17]=n=>t.paymentMethod=n),value:"bnpl",disabled:!y.value,class:"w-5 h-5 text-text-primary focus:ring-text-primary"},null,8,De),[[g,t.paymentMethod]]),e("div",null,[e("span",Re,o(r(d)("checkout.bnpl")),1),e("span",Ze,o(r(d)("checkout.bnpl_desc")),1)])]),e("span",{class:x(["text-sm font-bold",y.value?"text-green-600":"text-red-500"])},o(r(d)("checkout.credit_available"))+": "+o(r(_)(k.value)),3)]),y.value?p("",!0):(u(),c("div",Ke,o(r(d)("checkout.insufficient_credit")),1))],2)]),i.paymentMethod?(u(),c("p",Oe,o(i.paymentMethod),1)):p("",!0)])]),e("div",Te,[e("div",Ye,[e("h3",Ge,o(r(d)("checkout.order_summary")),1),e("div",He,[(u(!0),c(q,null,j(r(f).items,n=>(u(),c("div",{key:n.productId,class:"flex gap-4 items-start border-b border-border/50 pb-4 last:border-0"},[e("div",Je,[e("img",{src:r(E)(n.product.images[0]),class:"w-full h-full object-cover"},null,8,Pe)]),e("div",We,[e("h4",Xe,o(n.product.name),1),e("p",Qe,o(n.selectedVariant),1),e("p",et,"x "+o(n.quantity),1)]),e("div",tt,o(r(_)((r(b).isB2B?n.product.priceWholesale:n.product.priceRetail)*n.quantity)),1)]))),128))]),e("div",st,[e("div",ot,[e("span",null,o(r(d)("cart.subtotal")),1),e("span",null,o(r(_)(r(f).total)),1)]),e("div",rt,[e("span",null,o(r(d)("cart.shipping_cost")),1),e("span",nt,o(r(d)("cart.free")),1)]),e("div",dt,[e("span",null,o(r(d)("order.tax")),1),e("span",null,o(r(_)(0)),1)])]),e("div",it,[e("span",at,o(r(d)("cart.total")),1),e("div",lt,[s[22]||(s[22]=e("span",{class:"text-xs text-text-secondary block"},"USD",-1)),e("span",ct,o(r(_)(r(f).total)),1)])]),e("button",{onClick:V,disabled:r(h).isLoading,class:"w-full mt-8 bg-text-primary hover:opacity-90 text-bg-page font-bold py-4 rounded-none transition-all disabled:opacity-50 flex justify-center items-center"},[r(h).isLoading?(u(),c("span",pt,"âšª")):p("",!0),$(" "+o(r(h).isLoading?r(d)("checkout.processing"):r(d)("checkout.place_order")),1)],8,ut)])])])])]))}}),vt=D(mt,[["__scopeId","data-v-b0d6ed93"]]);export{vt as default};
