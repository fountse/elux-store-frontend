import{d as N,u as R,m as j,g,i as t,t as n,f as o,q as A,D as b,G as v,b as k,w as M,h as C,j as p,x as c,k as D,o as y,v as E,l as P}from"./index-CfosiBGc.js";import{u as $}from"./user-CLfQ5aGK.js";const q={class:"flex items-center justify-center bg-page px-4 relative py-12"},G={class:"max-w-md w-full p-8"},F={class:"text-center mb-8"},H={class:"text-3xl font-bold text-text-primary mb-2"},I={class:"text-text-secondary"},J={class:"block text-sm font-medium text-text-secondary mb-2"},K={class:"flex justify-between items-center mb-2"},Q={class:"block text-sm font-medium text-text-secondary"},W={class:"block text-sm font-medium text-text-secondary mb-2"},X={class:"flex gap-4"},Y=["placeholder"],Z={key:0,class:"text-error text-sm text-center"},z=["disabled"],O={key:0,class:"animate-spin mr-2"},ee={class:"mt-4 text-center text-sm text-text-secondary"},te={class:"mr-1"},oe={class:"mt-6 text-center text-sm text-text-secondary"},re=N({__name:"LoginView",setup(se){const{t:s}=R(),m=c(""),f=c(""),d=c(""),_=c(""),u=c(""),w=c(null),i=$(),V=P(),S=E(),x=()=>{const a=w.value;if(!a)return;const e=a.getContext("2d");if(!e)return;e.clearRect(0,0,a.width,a.height);const h="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let r="";for(let l=0;l<4;l++)r+=h.charAt(Math.floor(Math.random()*h.length));_.value=r,e.fillStyle="#f5f5f5",e.fillRect(0,0,a.width,a.height),e.font="24px Arial",e.textAlign="center",e.textBaseline="middle";for(let l=0;l<r.length;l++){const B=20+l*25,L=25,T=(Math.random()-.5)*.4;e.save(),e.translate(B,L),e.rotate(T),e.fillStyle=`rgb(${Math.floor(Math.random()*100)}, ${Math.floor(Math.random()*100)}, ${Math.floor(Math.random()*100)})`,e.fillText(r[l],0,0),e.restore()}e.strokeStyle="#ddd";for(let l=0;l<5;l++)e.beginPath(),e.moveTo(Math.random()*a.width,Math.random()*a.height),e.lineTo(Math.random()*a.width,Math.random()*a.height),e.stroke()};j(()=>{x()});const U=async()=>{if(u.value="",!m.value||!f.value){u.value="Please fill in all fields";return}if(!d.value||d.value.toUpperCase()!==_.value){u.value=s("login.captcha_error"),x(),d.value="";return}if(await i.login(m.value,f.value)){const e=S.query.redirect||"/";V.push(e)}};return(a,e)=>{const h=D("router-link");return y(),g("div",q,[t("div",G,[t("div",F,[t("h1",H,n(o(s)("login.welcome")),1),t("p",I,n(o(s)("login.subtitle")),1)]),t("form",{onSubmit:A(U,["prevent"]),class:"space-y-6"},[t("div",null,[t("label",J,n(o(s)("login.username")),1),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>m.value=r),type:"text",class:"w-full bg-white border border-gray-300 rounded-none px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-black focus:ring-0 focus:outline-none transition-colors",placeholder:"user or business"},null,512),[[v,m.value]])]),t("div",null,[t("div",K,[t("label",Q,n(o(s)("login.password")),1),k(h,{to:"/forgot-password",class:"text-sm text-accent hover:text-accent-hover font-medium"},{default:M(()=>[p(n(o(s)("login.forgot_password")),1)]),_:1})]),b(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>f.value=r),type:"password",class:"w-full bg-white border border-gray-300 rounded-none px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-black focus:ring-0 focus:outline-none transition-colors",placeholder:"123456"},null,512),[[v,f.value]])]),t("div",null,[t("label",W,n(o(s)("login.captcha")),1),t("div",X,[b(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>d.value=r),type:"text",class:"flex-1 bg-white border border-gray-300 rounded-none px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-black focus:ring-0 focus:outline-none transition-colors",placeholder:o(s)("login.captcha")},null,8,Y),[[v,d.value]]),t("canvas",{ref_key:"captchaCanvas",ref:w,width:"120",height:"50",class:"cursor-pointer rounded-none border border-border",onClick:x,title:"Click to refresh"},null,512)])]),u.value||o(i).error?(y(),g("div",Z,n(u.value||o(i).error),1)):C("",!0),t("button",{type:"submit",disabled:o(i).isLoading,class:"w-full bg-black hover:bg-gray-800 text-white font-bold py-3 rounded-none transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center"},[o(i).isLoading?(y(),g("span",O,"âšª")):C("",!0),p(" "+n(o(i).isLoading?o(s)("login.submitting"):o(s)("login.submit")),1)],8,z),t("div",ee,[t("span",te,n(o(s)("login.no_account")),1),k(h,{to:"/register",class:"text-accent hover:text-accent-hover font-medium"},{default:M(()=>[p(n(o(s)("login.register_now")),1)]),_:1})])],32),t("div",oe,[t("p",null,n(o(s)("login.demo_credentials"))+":",1),e[3]||(e[3]=t("p",null,[p("User: "),t("span",{class:"text-text-primary"},"user / 123456")],-1)),e[4]||(e[4]=t("p",null,[p("Business: "),t("span",{class:"text-text-primary"},"business / 123456")],-1))])])])}}});export{re as default};
