import{d as F,u as O,w as U,o as D,i as m,k as e,t as i,h as r,B as H,F as J,l as K,x as L,m as c,E as a,H as p,j as f,G as M,b as G,e as Y,r as b,K as Q,p as W,g as x,n as I,q as X}from"./index-7FrspKv6.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"flex items-center justify-center bg-page px-4 py-8 relative"},te={class:"max-w-4xl w-full"},se={class:"bg-surface rounded-none shadow-none p-8 border border-border"},re={class:"text-center mb-8"},oe={class:"text-3xl font-bold text-text-primary mb-2"},ne={class:"text-text-secondary"},ie={class:"mb-8"},le={class:"flex items-center justify-between relative"},ae={key:0,class:"space-y-4 animate-fade-in"},de={class:"text-xl font-bold mb-4"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"col-span-2"},ue={class:"block text-sm font-medium text-text-secondary mb-2"},me=["placeholder"],xe={class:"col-span-2"},_e={class:"block text-sm font-medium text-text-secondary mb-2"},fe=["placeholder"],be={class:"block text-sm font-medium text-text-secondary mb-2"},he=["placeholder"],ye={class:"block text-sm font-medium text-text-secondary mb-2"},ve=["placeholder"],ge={key:1,class:"space-y-4 animate-fade-in"},ke={class:"text-xl font-bold mb-4"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ve={class:"block text-sm font-medium text-text-secondary mb-2"},Ce=["placeholder"],Se={class:"block text-sm font-medium text-text-secondary mb-2"},Ue=["placeholder"],Me={class:"col-span-2"},Ie={class:"block text-sm font-medium text-text-secondary mb-2"},Ne=["placeholder"],Ee={key:2,class:"space-y-4 animate-fade-in"},Ae={class:"text-xl font-bold mb-4"},Pe={class:"space-y-4"},Re={class:"block text-sm font-medium text-text-secondary mb-2"},Te=["placeholder"],je={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"block text-sm font-medium text-text-secondary mb-2"},$e={class:"border-2 border-dashed border-border rounded-none p-4 text-center cursor-pointer hover:border-text-primary transition-colors"},ze={class:"text-sm text-text-secondary"},Be={class:"block text-sm font-medium text-text-secondary mb-2"},Fe={class:"border-2 border-dashed border-border rounded-none p-4 text-center cursor-pointer hover:border-text-primary transition-colors"},Oe={class:"text-sm text-text-secondary"},De={class:"block text-sm font-medium text-text-secondary mb-2"},He=["placeholder"],Je={key:3,class:"space-y-4 animate-fade-in"},Ke={class:"text-xl font-bold mb-4"},Le={class:"space-y-4"},Ge={class:"block text-sm font-medium text-text-secondary mb-2"},Ye=["placeholder"],Qe={class:"block text-sm font-medium text-text-secondary mb-2"},We={class:"flex items-start space-x-2 cursor-pointer group"},Xe={class:"text-sm text-text-secondary group-hover:text-text-primary transition-colors"},Ze={class:"block text-sm font-medium text-text-secondary mb-2"},et={class:"flex items-start space-x-2 cursor-pointer group"},tt={class:"text-sm text-text-secondary group-hover:text-text-primary transition-colors"},st={key:4,class:"space-y-4 animate-fade-in"},rt={class:"text-xl font-bold mb-4 text-text-primary"},ot={class:"space-y-4"},nt={class:"p-4 bg-surface-secondary rounded-none space-y-4 border border-border"},it={class:"font-medium text-text-primary"},lt={class:"block text-sm font-medium text-text-secondary mb-2"},at=["placeholder"],dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={class:"block text-sm font-medium text-text-secondary mb-2"},pt={class:"block text-sm font-medium text-text-secondary mb-2"},ut={class:"block text-sm font-medium text-text-secondary mb-2"},mt={class:"border-2 border-dashed border-border rounded-none p-4 text-center cursor-pointer hover:border-text-primary transition-colors"},xt={class:"text-sm text-text-secondary"},_t={class:"block text-sm font-medium text-text-secondary mb-2"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={class:"block text-sm font-medium text-text-secondary mb-2"},ht={class:"flex gap-4"},yt=["placeholder"],vt={key:5,class:"bg-error/10 border border-error/20 text-error text-sm text-center font-bold p-3 rounded-none animate-pulse"},gt={class:"flex justify-between pt-6 border-t border-border"},kt={class:"flex gap-3"},wt=["disabled"],Vt={key:0,class:"animate-spin mr-2"},Ct={class:"mt-6 text-sm text-text-secondary"},St={class:"mr-1"},Ut={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},Mt={class:"bg-surface rounded-none shadow-xl w-full max-w-sm p-6 relative z-10 animate-fade-in border border-border"},It={class:"text-xl font-bold text-text-primary mb-2"},Nt={class:"text-text-secondary mb-6"},Et={class:"flex gap-3"},k=5,w="enterprise_register_form",At=F({__name:"EnterpriseRegisterView",setup(Pt){const{t:s}=O(),N=X(),y=b(!1),v=b(!1),u=b(""),d=b(1),o=Q({companyName:"",address:"",crn:"",sic:"",vat:"",utr:"",bankAccount:"",directorInfo:"",psc:"",eoId:"",compliance:!1,ageVerify:!1,email:"",phone:"",username:"",password:"",confirmPassword:""}),g=b(""),_=b(null),C=b(""),E=l=>s(`enterprise_register.steps.${["basic","financial","kyc","industry","documents"][l-1]}`),A=()=>{const l=localStorage.getItem(w);if(l)try{const t=JSON.parse(l);Object.assign(o,t)}catch(t){console.error("Failed to load cache",t)}};U(o,l=>{localStorage.setItem(w,JSON.stringify(l))},{deep:!0});const P=()=>{y.value=!0},R=()=>{Object.keys(o).forEach(l=>{typeof o[l]=="boolean"?o[l]=!1:o[l]=""}),localStorage.removeItem(w),d.value=1,u.value="",g.value="",y.value=!1},S=l=>{switch(u.value="",l){case 1:if(!o.companyName||!o.address||!o.crn||!o.sic)return u.value=s("enterprise_register.required_error"),!1;break;case 2:if(!o.bankAccount)return u.value=s("enterprise_register.required_error"),!1;break;case 3:if(!o.directorInfo)return u.value=s("enterprise_register.required_error"),!1;break;case 4:if(!o.compliance||!o.ageVerify)return u.value=s("enterprise_register.required_error"),!1;break;case 5:if(!o.email||!o.phone||!o.username||!o.password||!o.confirmPassword)return u.value=s("enterprise_register.required_error"),!1;if(o.password!==o.confirmPassword)return u.value=s("enterprise_register.documents.password_mismatch"),!1;break}return!0},T=()=>{S(d.value)&&d.value++},j=()=>{d.value>1&&(d.value--,u.value="")},V=()=>{if(!_.value)return;const l=_.value.getContext("2d");if(!l)return;l.clearRect(0,0,_.value.width,_.value.height);const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let h="";for(let n=0;n<4;n++)h+=t.charAt(Math.floor(Math.random()*t.length));C.value=h,l.fillStyle="#ffffff",l.fillRect(0,0,_.value.width,_.value.height),l.font="bold 24px Arial",l.textAlign="center",l.textBaseline="middle";for(let n=0;n<h.length;n++){const $=20+n*25,z=25,B=(Math.random()-.5)*.4;l.save(),l.translate($,z),l.rotate(B),l.fillStyle=`rgb(${Math.floor(Math.random()*100)}, ${Math.floor(Math.random()*100)}, ${Math.floor(Math.random()*100)})`,l.fillText(h[n],0,0),l.restore()}l.strokeStyle="#e5e7eb";for(let n=0;n<5;n++)l.beginPath(),l.moveTo(Math.random()*_.value.width,Math.random()*_.value.height),l.lineTo(Math.random()*_.value.width,Math.random()*_.value.height),l.stroke()},q=async()=>{if(S(5)){if(!g.value||g.value.toUpperCase()!==C.value){u.value=s("login.captcha_error"),V();return}v.value=!0;try{await new Promise(l=>setTimeout(l,1500)),localStorage.removeItem(w),N.push({name:"login",query:{registered:"true",type:"enterprise"}})}catch{u.value=s("common.error")}finally{v.value=!1}}};return D(()=>{A()}),U(d,l=>{l===5&&setTimeout(V,100)}),(l,t)=>{const h=W("router-link");return x(),m("div",ee,[e("div",te,[e("div",se,[e("div",re,[e("h1",oe,i(r(s)("enterprise_register.title")),1),e("p",ne,i(r(s)("enterprise_register.subtitle")),1)]),e("div",ie,[e("div",le,[t[20]||(t[20]=e("div",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 w-full h-1 bg-surface-secondary -z-10"},null,-1)),e("div",{class:"absolute left-0 top-1/2 transform -translate-y-1/2 h-1 bg-text-primary transition-all duration-300 -z-10",style:H({width:`${(d.value-1)/(k-1)*100}%`})},null,4),(x(),m(J,null,K(k,n=>e("div",{key:n,class:"flex flex-col items-center gap-2"},[e("div",{class:I(["w-8 h-8 rounded-none flex items-center justify-center text-sm font-bold transition-colors duration-300",d.value>=n?"bg-text-primary text-surface":"bg-surface-secondary text-text-tertiary"])},i(n),3),e("span",{class:I(["text-xs font-medium hidden sm:block",d.value>=n?"text-text-primary":"text-text-tertiary"])},i(E(n)),3)])),64))])]),e("form",{onSubmit:L(q,["prevent"]),class:"space-y-6"},[d.value===1?(x(),m("div",ae,[e("h2",de,i(r(s)("enterprise_register.basic.title")),1),e("div",ce,[e("div",pe,[e("label",ue,[c(i(r(s)("enterprise_register.basic.company_name"))+" ",1),t[21]||(t[21]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.companyName=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.basic.company_name_hint")},null,8,me),[[p,o.companyName]])]),e("div",xe,[e("label",_e,[c(i(r(s)("enterprise_register.basic.address"))+" ",1),t[22]||(t[22]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.address=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.basic.address_hint")},null,8,fe),[[p,o.address]])]),e("div",null,[e("label",be,[c(i(r(s)("enterprise_register.basic.crn"))+" ",1),t[23]||(t[23]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.crn=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.basic.crn_hint")},null,8,he),[[p,o.crn]])]),e("div",null,[e("label",ye,[c(i(r(s)("enterprise_register.basic.sic"))+" ",1),t[24]||(t[24]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.sic=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.basic.sic_hint")},null,8,ve),[[p,o.sic]])])])])):f("",!0),d.value===2?(x(),m("div",ge,[e("h2",ke,i(r(s)("enterprise_register.financial.title")),1),e("div",we,[e("div",null,[e("label",Ve,i(r(s)("enterprise_register.financial.vat")),1),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>o.vat=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.financial.vat_hint")},null,8,Ce),[[p,o.vat]])]),e("div",null,[e("label",Se,i(r(s)("enterprise_register.financial.utr")),1),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>o.utr=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.financial.utr_hint")},null,8,Ue),[[p,o.utr]])]),e("div",Me,[e("label",Ie,[c(i(r(s)("enterprise_register.financial.bank_account"))+" ",1),t[25]||(t[25]=e("span",{class:"text-error"},"*",-1))]),a(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=n=>o.bankAccount=n),rows:"3",class:"input-field",placeholder:r(s)("enterprise_register.financial.bank_account_hint")},null,8,Ne),[[p,o.bankAccount]])])])])):f("",!0),d.value===3?(x(),m("div",Ee,[e("h2",Ae,i(r(s)("enterprise_register.kyc.title")),1),e("div",Pe,[e("div",null,[e("label",Re,[c(i(r(s)("enterprise_register.kyc.director_info"))+" ",1),t[26]||(t[26]=e("span",{class:"text-error"},"*",-1))]),a(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=n=>o.directorInfo=n),rows:"3",class:"input-field",placeholder:r(s)("enterprise_register.kyc.director_hint")},null,8,Te),[[p,o.directorInfo]])]),e("div",je,[e("div",null,[e("label",qe,[c(i(r(s)("enterprise_register.kyc.proof_id"))+" ",1),t[27]||(t[27]=e("span",{class:"text-error"},"*",-1))]),e("div",$e,[e("span",ze,i(r(s)("enterprise_register.kyc.proof_id_hint")),1)])]),e("div",null,[e("label",Be,[c(i(r(s)("enterprise_register.kyc.proof_address"))+" ",1),t[28]||(t[28]=e("span",{class:"text-error"},"*",-1))]),e("div",Fe,[e("span",Oe,i(r(s)("enterprise_register.kyc.proof_address_hint")),1)])])]),e("div",null,[e("label",De,i(r(s)("enterprise_register.kyc.psc")),1),a(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=n=>o.psc=n),rows:"2",class:"input-field",placeholder:r(s)("enterprise_register.kyc.psc_hint")},null,8,He),[[p,o.psc]])])])])):f("",!0),d.value===4?(x(),m("div",Je,[e("h2",Ke,i(r(s)("enterprise_register.industry.title")),1),e("div",Le,[e("div",null,[e("label",Ge,i(r(s)("enterprise_register.industry.eo_id")),1),a(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>o.eoId=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.industry.eo_id_hint")},null,8,Ye),[[p,o.eoId]])]),e("div",null,[e("label",Qe,[c(i(r(s)("enterprise_register.industry.compliance"))+" ",1),t[29]||(t[29]=e("span",{class:"text-error"},"*",-1))]),e("label",We,[a(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>o.compliance=n),type:"checkbox",class:"checkbox-field"},null,512),[[M,o.compliance]]),e("span",Xe,i(r(s)("enterprise_register.industry.compliance_hint")),1)])]),e("div",null,[e("label",Ze,[c(i(r(s)("enterprise_register.industry.age_verify"))+" ",1),t[30]||(t[30]=e("span",{class:"text-error"},"*",-1))]),e("label",et,[a(e("input",{"onUpdate:modelValue":t[11]||(t[11]=n=>o.ageVerify=n),type:"checkbox",class:"checkbox-field"},null,512),[[M,o.ageVerify]]),e("span",tt,i(r(s)("enterprise_register.industry.age_verify_hint")),1)])])])])):f("",!0),d.value===5?(x(),m("div",st,[e("h2",rt,i(r(s)("enterprise_register.documents.title")),1),e("div",ot,[e("div",nt,[e("h3",it,i(r(s)("enterprise_register.documents.account_info")),1),e("div",null,[e("label",lt,[c(i(r(s)("enterprise_register.documents.username"))+" ",1),t[31]||(t[31]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[12]||(t[12]=n=>o.username=n),type:"text",class:"input-field",placeholder:r(s)("enterprise_register.documents.username_hint")},null,8,at),[[p,o.username]])]),e("div",dt,[e("div",null,[e("label",ct,[c(i(r(s)("enterprise_register.documents.password"))+" ",1),t[32]||(t[32]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[13]||(t[13]=n=>o.password=n),type:"password",class:"input-field",placeholder:"••••••••"},null,512),[[p,o.password]])]),e("div",null,[e("label",pt,[c(i(r(s)("enterprise_register.documents.confirm_password"))+" ",1),t[33]||(t[33]=e("span",{class:"text-error"},"*",-1))]),a(e("input",{"onUpdate:modelValue":t[14]||(t[14]=n=>o.confirmPassword=n),type:"password",class:"input-field",placeholder:"••••••••"},null,512),[[p,o.confirmPassword]])])])]),e("div",null,[e("label",ut,[c(i(r(s)("enterprise_register.documents.articles"))+" ",1),t[34]||(t[34]=e("span",{class:"text-error"},"*",-1))]),e("div",mt,[e("span",xt,i(r(s)("enterprise_register.documents.articles_hint")),1)])]),e("div",null,[e("label",_t,[c(i(r(s)("enterprise_register.documents.contact"))+" ",1),t[35]||(t[35]=e("span",{class:"text-error"},"*",-1))]),e("div",ft,[a(e("input",{"onUpdate:modelValue":t[15]||(t[15]=n=>o.email=n),type:"email",class:"input-field",placeholder:"Email"},null,512),[[p,o.email]]),a(e("input",{"onUpdate:modelValue":t[16]||(t[16]=n=>o.phone=n),type:"tel",class:"input-field",placeholder:"Phone"},null,512),[[p,o.phone]])])]),e("div",null,[e("label",bt,i(r(s)("login.captcha")),1),e("div",ht,[a(e("input",{"onUpdate:modelValue":t[17]||(t[17]=n=>g.value=n),type:"text",class:"flex-1 input-field",placeholder:r(s)("login.captcha")},null,8,yt),[[p,g.value]]),e("canvas",{ref_key:"captchaCanvas",ref:_,width:"120",height:"50",class:"cursor-pointer rounded-none border border-border bg-surface-secondary",onClick:V,title:"Click to refresh"},null,512)])])])])):f("",!0),u.value?(x(),m("div",vt,i(u.value),1)):f("",!0),e("div",gt,[e("button",{type:"button",onClick:P,class:"px-6 py-2 text-sm font-medium text-text-secondary hover:text-error transition-colors"},i(r(s)("enterprise_register.reset")),1),e("div",kt,[d.value>1?(x(),m("button",{key:0,type:"button",onClick:j,class:"px-6 py-2 rounded-none border border-border text-text-primary hover:bg-surface-secondary transition-colors"},i(r(s)("enterprise_register.prev")),1)):f("",!0),d.value<k?(x(),m("button",{key:1,type:"button",onClick:T,class:"px-6 py-2 rounded-none bg-text-primary text-surface hover:opacity-90 transition-colors"},i(r(s)("enterprise_register.next")),1)):f("",!0),d.value===k?(x(),m("button",{key:2,type:"submit",disabled:v.value,class:"px-6 py-2 rounded-none bg-text-primary text-surface hover:opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[v.value?(x(),m("span",Vt,"⚪")):f("",!0),c(" "+i(v.value?r(s)("login.submitting"):r(s)("enterprise_register.submit")),1)],8,wt)):f("",!0)])])],32)]),e("div",Ct,[e("span",St,i(r(s)("register.has_account")),1),G(h,{to:"/login",class:"text-accent hover:text-accent-hover font-medium"},{default:Y(()=>[c(i(r(s)("register.login_now")),1)]),_:1})])]),y.value?(x(),m("div",Ut,[e("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t[18]||(t[18]=n=>y.value=!1)}),e("div",Mt,[e("h3",It,i(r(s)("enterprise_register.reset_title")),1),e("p",Nt,i(r(s)("enterprise_register.reset_confirm")),1),e("div",Et,[e("button",{onClick:t[19]||(t[19]=n=>y.value=!1),class:"flex-1 px-4 py-2 rounded-none border border-border text-text-primary hover:bg-surface-secondary transition-colors font-medium"},i(r(s)("common.cancel")),1),e("button",{onClick:R,class:"flex-1 px-4 py-2 rounded-none bg-error text-white hover:bg-error-hover transition-colors font-medium"},i(r(s)("common.confirm")),1)])])])):f("",!0)])}}}),jt=Z(At,[["__scopeId","data-v-efdb87b2"]]);export{jt as default};
