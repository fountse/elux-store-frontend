import{d as C,u as S,m as P,a as B,w as M,J as v,o as m,i as e,t as o,f as l,n as h,j as w,g as f,h as b,q as k,D as c,G as d,x as g}from"./index-CfosiBGc.js";import{u as N}from"./user-CLfQ5aGK.js";import{P as j}from"./PersonalCenterLayout-Drfqp64-.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"space-y-8 animate-fade-in"},T={class:"text-2xl font-bold text-text-primary"},q={class:"flex border-b border-gray-200"},E={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-black"},F={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-black"},J={key:0,class:"max-w-2xl space-y-6"},$={class:"flex items-center gap-6 mb-8"},z={class:"w-24 h-24 rounded-full bg-gray-100 overflow-hidden relative group cursor-pointer"},G=["src"],L={class:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},O={class:"text-white text-xs"},A={class:"font-bold text-lg"},H={class:"text-gray-500 text-sm"},K={class:"block text-sm font-medium text-text-secondary mb-2"},Q={class:"block text-sm font-medium text-text-secondary mb-2"},R={class:"block text-sm font-medium text-text-secondary mb-2"},W={class:"block text-sm font-medium text-text-secondary mb-2"},X={class:"pt-4"},Y={type:"submit",class:"btn-primary px-8 py-2.5 rounded-lg text-sm"},Z={key:1,class:"max-w-2xl space-y-6"},ee={class:"block text-sm font-medium text-text-secondary mb-2"},te={class:"block text-sm font-medium text-text-secondary mb-2"},se={class:"block text-sm font-medium text-text-secondary mb-2"},oe={key:0,class:"text-red-500 text-xs mt-1"},le={class:"pt-4"},ae={type:"submit",class:"btn-primary px-8 py-2.5 rounded-lg text-sm"},ne=C({__name:"UserProfile",setup(re){const{t:s}=S(),r=N(),u=g("basic"),p=g(""),a=v({username:"",name:"",email:"",phone:""}),i=v({current:"",new:"",confirm:""});P(()=>{r.user&&(a.username=r.user.username,a.name=r.user.name,a.email=r.user.email||"",a.phone=r.user.phone||"")});const U=()=>{r.user&&(r.user.name=a.name,r.user.email=a.email,r.user.phone=a.phone,localStorage.setItem("user",JSON.stringify(r.user)),alert(s("common.success")))},V=()=>{if(p.value="",i.new!==i.confirm){p.value=s("profile.password_mismatch");return}if(!i.current||!i.new){p.value=s("profile.password_required");return}alert(s("common.success")),i.current="",i.new="",i.confirm=""};return(ie,t)=>(m(),B(j,null,{default:M(()=>{var x,_,y;return[e("div",I,[e("h1",T,o(l(s)("profile.title")),1),e("div",q,[e("button",{onClick:t[0]||(t[0]=n=>u.value="basic"),class:h(["px-6 py-3 text-sm font-medium transition-colors relative",u.value==="basic"?"text-black":"text-gray-500 hover:text-black"])},[w(o(l(s)("profile.basic_info"))+" ",1),u.value==="basic"?(m(),f("span",E)):b("",!0)],2),e("button",{onClick:t[1]||(t[1]=n=>u.value="security"),class:h(["px-6 py-3 text-sm font-medium transition-colors relative",u.value==="security"?"text-black":"text-gray-500 hover:text-black"])},[w(o(l(s)("profile.security"))+" ",1),u.value==="security"?(m(),f("span",F)):b("",!0)],2)]),u.value==="basic"?(m(),f("div",J,[e("div",$,[e("div",z,[e("img",{src:((x=l(r).user)==null?void 0:x.avatar)||"https://ui-avatars.com/api/?name=User",class:"w-full h-full object-cover"},null,8,G),e("div",L,[e("span",O,o(l(s)("common.edit")),1)])]),e("div",null,[e("h3",A,o(((_=l(r).user)==null?void 0:_.name)||"User"),1),e("p",H,o(((y=l(r).user)==null?void 0:y.role)||"Member"),1)])]),e("form",{onSubmit:k(U,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",K,o(l(s)("profile.username")),1),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>a.username=n),type:"text",class:"input-field bg-gray-50 cursor-not-allowed",disabled:""},null,512),[[d,a.username]])]),e("div",null,[e("label",Q,o(l(s)("profile.name")),1),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>a.name=n),type:"text",class:"input-field"},null,512),[[d,a.name]])]),e("div",null,[e("label",R,o(l(s)("profile.email")),1),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>a.email=n),type:"email",class:"input-field"},null,512),[[d,a.email]])]),e("div",null,[e("label",W,o(l(s)("profile.phone")),1),c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>a.phone=n),type:"tel",class:"input-field"},null,512),[[d,a.phone]])]),e("div",X,[e("button",Y,o(l(s)("common.save")),1)])],32)])):b("",!0),u.value==="security"?(m(),f("div",Z,[e("form",{onSubmit:k(V,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",ee,o(l(s)("profile.current_password")),1),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>i.current=n),type:"password",class:"input-field"},null,512),[[d,i.current]])]),e("div",null,[e("label",te,o(l(s)("profile.new_password")),1),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>i.new=n),type:"password",class:"input-field"},null,512),[[d,i.new]])]),e("div",null,[e("label",se,o(l(s)("profile.confirm_password")),1),c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>i.confirm=n),type:"password",class:"input-field"},null,512),[[d,i.confirm]]),p.value?(m(),f("p",oe,o(p.value),1)):b("",!0)]),e("div",le,[e("button",ae,o(l(s)("profile.update_password")),1)])],32)])):b("",!0)])]}),_:1}))}}),pe=D(ne,[["__scopeId","data-v-8ca6060e"]]);export{pe as default};
