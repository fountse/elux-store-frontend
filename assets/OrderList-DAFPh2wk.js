import{d as B,u as I,a as f,w as $,o,i as t,t as r,f as n,E as F,H as O,g as c,r as y,n as _,j as m,h as x,F as h,b as q,y as g,l as z,x as b,c as v}from"./index-CEzz54Df.js";import{P as E}from"./PersonalCenterLayout-B6aGKgbL.js";import{u as U}from"./order-CQN3kDrI.js";import{g as X,f as H}from"./index-BvOmRYqU.js";import{C as Q,T as R,P as G}from"./truck-B36Zk_XO.js";import{C as k}from"./check-circle-2-zvhkT_gE.js";import{A as w,X as J,C as K}from"./x-circle-BW29Ibo4.js";import"./user-BMqs4DLJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./cart-Cuu-ZCK-.js";import"./createLucideIcon-YsG84OD3.js";const W={class:"space-y-8"},Y={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 sm:gap-0"},Z={class:"text-2xl font-bold text-text-primary"},ee={class:"w-full sm:w-72"},te=["placeholder"],se={class:"flex border-b border-gray-200 overflow-x-auto whitespace-nowrap scrollbar-hide"},ae=["onClick"],le={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-black"},oe={class:"space-y-4 sm:space-y-6"},re=["onClick"],ne={class:"flex flex-col sm:flex-row justify-between gap-6"},ce={class:"flex-1 flex flex-col gap-4"},ie={class:"flex flex-wrap items-baseline gap-4"},de={class:"text-gray-500 flex items-baseline gap-2"},pe={class:"text-black font-medium text-lg break-all"},ue={class:"text-xs text-gray-400"},me={class:"space-y-3"},xe={class:"w-12 h-12 bg-gray-100 rounded flex-shrink-0 border border-gray-100"},fe=["src"],ye={class:"flex-1 flex flex-col justify-center min-h-[3rem]"},_e={class:"flex items-baseline gap-2"},he={class:"text-sm text-gray-900 line-clamp-2 leading-tight"},ge={class:"text-sm text-gray-900"},be={key:0,class:"text-xs text-gray-500 mt-0.5"},ve={class:"flex flex-col items-end justify-between gap-4 min-w-[200px]"},ke={class:"flex flex-wrap justify-end gap-2 items-center"},we={key:0,class:"px-2 py-1 text-[11px] font-bold rounded-md text-red-600 flex items-center gap-1"},Ce={class:"flex gap-2 mt-auto items-baseline"},Pe={class:"text-sm text-gray-500"},je={class:"text-lg font-bold text-black"},Oe=B({__name:"OrderList",setup(Le){const{t:l}=I(),C=z(),P=U(),j=e=>{if(!e)return"";const a=new Date(e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a)},p=b(""),L=v(()=>[{key:"all",label:l("order.tabs.all")},{key:"pending",label:l("order.tabs.pending")},{key:"processing",label:l("order.tabs.processing")||"Processing"},{key:"shipped",label:l("order.tabs.shipping")},{key:"delivered",label:l("order.tabs.completed")},{key:"cancelled",label:l("order.tabs.cancelled")}]),d=b("all"),S=v(()=>{let e=P.orders;if(d.value!=="all"&&(e=e.filter(a=>a.status===d.value)),p.value){const a=p.value.toLowerCase();e=e.filter(s=>s.id.toLowerCase().includes(a)||s.items.some(i=>i.product.name.toLowerCase().includes(a)))}return e}),V=e=>l(`order.tabs.${{shipped:"shipping",delivered:"completed"}[e]||e}`),D=e=>{switch(e){case"pending":return"text-orange-600";case"processing":return"text-blue-600";case"shipped":return"text-purple-600";case"delivered":return"text-green-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}},T=e=>{switch(e){case"pending":return K;case"processing":return G;case"shipped":return R;case"delivered":return k;case"cancelled":return J;default:return w}},u=e=>{const a=e==null?void 0:e.paymentStatus;return a==="paid"||a==="unpaid"?a:(e==null?void 0:e.paymentMethod)==="postpay"?"unpaid":null},M=e=>{const a=e;return(a==null?void 0:a.paymentMethod)==="postpay"||!!(a!=null&&a.isPostpay)||!!(a!=null&&a.postpay)},N=e=>e==="paid"?"text-green-700":"text-red-600";return(e,a)=>(o(),f(E,null,{default:$(()=>[t("div",W,[t("div",Y,[t("h1",Z,r(n(l)("order.title")),1),t("div",ee,[F(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>p.value=s),type:"text",placeholder:n(l)("common.search_placeholder"),class:"w-full border border-gray-300 px-4 py-2 text-sm focus:border-black outline-none transition-colors"},null,8,te),[[O,p.value]])])]),t("div",se,[(o(!0),c(h,null,y(L.value,s=>(o(),c("button",{key:s.key,onClick:i=>d.value=s.key,class:_(["px-6 py-3 text-sm font-medium transition-colors relative flex-shrink-0",d.value===s.key?"text-black":"text-gray-500 hover:text-black"])},[m(r(s.label)+" ",1),d.value===s.key?(o(),c("span",le)):x("",!0)],10,ae))),128))]),t("div",oe,[(o(!0),c(h,null,y(S.value,s=>(o(),c("div",{key:s.id,onClick:i=>n(C).push(`/user/orders/${s.id}`),class:"relative p-6 bg-white cursor-pointer border border-gray-100"},[t("div",ne,[t("div",ce,[t("div",ie,[t("p",de,[t("span",pe,r(s.id),1),t("span",ue,r(j(s.createdAt)),1)])]),t("div",me,[(o(!0),c(h,null,y(s.items,(i,A)=>(o(),c("div",{key:A,class:"flex items-start gap-3"},[t("div",xe,[t("img",{src:n(X)(i.product.images[0]),class:"w-full h-full object-contain mix-blend-multiply"},null,8,fe)]),t("div",ye,[t("div",_e,[t("p",he,r(i.product.name),1),t("span",ge,"x"+r(i.quantity),1)]),i.selectedVariant?(o(),c("p",be,r(i.selectedVariant),1)):x("",!0)])]))),128))])]),t("div",ve,[t("div",ke,[M(s)?(o(),c("span",we,[q(n(Q),{class:"w-3.5 h-3.5"}),m(" "+r(n(l)("order.postpay")||"先发后付"),1)])):x("",!0),u(s)?(o(),c("span",{key:1,class:_(["px-2 py-1 text-[11px] font-bold rounded-md flex items-center gap-1",N(u(s))])},[(o(),f(g(u(s)==="paid"?n(k):n(w)),{class:"w-3.5 h-3.5"})),m(" "+r(u(s)==="paid"?n(l)("order.paid")||"已支付":n(l)("order.unpaid")||"待支付"),1)],2)):x("",!0),t("span",{class:_(["px-2 py-1 text-[11px] font-bold rounded-md flex items-center gap-1",D(s.status)])},[(o(),f(g(T(s.status)),{class:"w-3.5 h-3.5"})),m(" "+r(V(s.status)),1)],2)]),t("div",Ce,[t("span",Pe,r(n(l)("order.actual_payment")||"实付款")+":",1),t("span",je,r(n(H)(s.totalAmount)),1)])])])],8,re))),128))])])]),_:1}))}});export{Oe as default};
