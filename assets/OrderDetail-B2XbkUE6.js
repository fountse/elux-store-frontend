import{P as O}from"./PersonalCenterLayout-Drfqp64-.js";import{d as R,u as T,m as U,a as v,w as y,v as q,x as k,o as l,i as e,b as g,j as x,t,f as s,g as d,h as c,n as w,y as C,F as z,r as F,l as X,k as E}from"./index-CfosiBGc.js";import{u as G}from"./order-DeiJiikK.js";import{u as J}from"./user-CLfQ5aGK.js";import{g as W,f}from"./index-BvOmRYqU.js";import{C as H,T as K,P as Q}from"./truck-B9wIDliu.js";import{C as j}from"./check-circle-2-k91n31Mp.js";import{A as S,X as A,C as Y}from"./x-circle-C3fxLwFl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./cart-U8LaqWSx.js";import"./createLucideIcon-_0C_8TfT.js";const Z={class:"flex flex-col gap-8 w-full max-w-5xl mx-auto font-sans text-black"},ee={class:"flex justify-between items-center text-sm"},te={class:"text-gray-500 tracking-wide"},se={class:"text-black"},ae={key:0,class:"border-b border-gray-200 pb-6"},ne={class:"flex flex-wrap items-center justify-between gap-4"},oe={class:"flex flex-col"},re={class:"text-xs text-gray-500 uppercase tracking-wider"},le={class:"text-xl font-bold tracking-wide"},ie={class:"flex items-center gap-4"},de={class:"flex items-center gap-4"},ce={key:0,class:"px-3 py-1.5 text-sm font-bold rounded-md text-red-600 flex items-center gap-2"},ue={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-12 lg:gap-24"},pe={class:"lg:col-span-2 flex flex-col gap-8"},xe={class:"w-24 h-24 bg-gray-100 flex-shrink-0"},fe=["src"],me={class:"flex-grow"},ge={class:"flex justify-between items-start"},_e={class:"font-bold text-lg tracking-wide leading-none"},ve={key:0,class:"text-sm text-gray-500 mt-1 tracking-wide"},ye={class:"text-right"},he={class:"text-sm font-bold text-black"},be={class:"text-sm text-gray-500"},ke={class:"lg:col-span-1 space-y-10"},we={class:"space-y-4"},Ce={class:"text-sm font-bold uppercase tracking-wider text-black"},je={class:"text-sm text-gray-600 leading-relaxed tracking-wide space-y-2"},Se={class:"mt-4 text-black"},Ae={class:"space-y-4 pt-4 border-t border-gray-100"},Pe={class:"text-sm font-bold uppercase tracking-wider text-black"},De={class:"text-sm text-gray-600 leading-relaxed tracking-wide space-y-2"},Ve={class:"space-y-3 text-sm tracking-wide"},Me={class:"flex justify-between items-center text-gray-600"},Ne={class:"flex justify-between items-center text-gray-400 text-xs"},$e={class:"flex justify-between items-center text-gray-600"},Be={class:"flex justify-between items-center text-base font-bold text-black pt-2"},Ie={class:"space-y-2 text-xs text-gray-400 tracking-wide"},Le={class:"flex justify-between"},Oe={class:"flex justify-between"},Re={class:"flex justify-between"},Te={class:"flex justify-between"},Ue={key:0,class:"flex justify-end pt-4 gap-4"},qe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6"},ze={class:"relative bg-white rounded-lg shadow-xl w-full max-w-sm transform transition-all p-6 text-center"},Fe={class:"mb-4"},Xe={class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 mb-4"},Ee={class:"text-lg font-bold text-gray-900 mb-2"},Ge={class:"text-sm text-gray-500"},Je={class:"mt-6 flex flex-col gap-3"},We={key:2,class:"py-12 text-center text-gray-500"},lt=R({__name:"OrderDetail",setup(He){const{t:o}=T(),P=q(),D=X(),_=G(),V=J(),u=k(!1),M=()=>{if(n.value){n.value.status="cancelled";const r=_.orders.find(a=>{var p;return a.id===((p=n.value)==null?void 0:p.id)});r&&(r.status="cancelled")}u.value=!1},n=k(void 0);U(async()=>{const r=P.params.id;r&&(_.orders.length,n.value=_.orders.find(a=>a.id===r),n.value)});const N=r=>o(`order.tabs.${{shipped:"shipping",delivered:"completed"}[r]||r}`),$=r=>{switch(r){case"pending":return"text-orange-600";case"processing":return"text-blue-600";case"shipped":return"text-purple-600";case"delivered":return"text-green-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}},B=r=>{switch(r){case"pending":return Y;case"processing":return Q;case"shipped":return K;case"delivered":return j;case"cancelled":return A;default:return S}},m=r=>{const a=r==null?void 0:r.paymentStatus;return a==="paid"||a==="unpaid"?a:(r==null?void 0:r.paymentMethod)==="postpay"?"unpaid":null},h=r=>{const a=r;return(a==null?void 0:a.paymentMethod)==="postpay"||!!(a!=null&&a.isPostpay)||!!(a!=null&&a.postpay)},I=r=>r==="paid"?"text-green-700":"text-red-600",L=r=>new Date(r).toLocaleString();return(r,a)=>{const p=E("router-link");return l(),v(O,null,{default:y(()=>{var b;return[e("div",Z,[e("div",ee,[e("div",te,[g(p,{to:"/",class:"hover:text-black transition-colors"},{default:y(()=>[x(t(s(o)("nav.home")),1)]),_:1}),a[4]||(a[4]=e("span",{class:"mx-2"},"/",-1)),g(p,{to:"/user/orders",class:"hover:text-black transition-colors"},{default:y(()=>[x(t(s(o)("sidebar.orders")),1)]),_:1}),a[5]||(a[5]=e("span",{class:"mx-2"},"/",-1)),e("span",se,t(s(o)("common.details")),1)])]),n.value?(l(),d("div",ae,[e("div",ne,[e("div",oe,[e("span",re,t(s(o)("order.no")),1),e("span",le,t(n.value.id),1)]),e("div",ie,[e("div",de,[h(n.value)?(l(),d("span",ce,[g(s(H),{class:"w-4 h-4"}),x(" "+t(s(o)("order.postpay")||"先发后付"),1)])):c("",!0),m(n.value)?(l(),d("span",{key:1,class:w(["px-3 py-1.5 text-sm font-bold rounded-md flex items-center gap-2",I(m(n.value))])},[(l(),v(C(m(n.value)==="paid"?s(j):s(S)),{class:"w-4 h-4"})),x(" "+t(m(n.value)==="paid"?s(o)("order.paid")||"已支付":s(o)("order.unpaid")||"待支付"),1)],2)):c("",!0)]),e("span",{class:w(["text-sm font-bold flex items-center gap-2",$(n.value.status)])},[(l(),v(C(B(n.value.status)),{class:"w-4 h-4"})),x(" "+t(N(n.value.status)),1)],2)])])])):c("",!0),n.value?(l(),d("div",ue,[e("div",pe,[(l(!0),d(z,null,F(n.value.items,i=>(l(),d("div",{key:i.productId+i.selectedVariant,class:"flex gap-6 items-start"},[e("div",xe,[e("img",{src:s(W)(i.product.images[0]),class:"w-full h-full object-cover mix-blend-multiply"},null,8,fe)]),e("div",me,[e("div",ge,[e("div",null,[e("h3",_e,t(i.product.name),1),i.selectedVariant?(l(),d("p",ve,t(s(o)("common.spec"))+": "+t(i.selectedVariant),1)):c("",!0)]),e("div",ye,[e("p",he,t(s(f)(i.product.priceRetail)),1),e("span",be,"x"+t(i.quantity),1)])])])]))),128))]),e("div",ke,[e("div",we,[e("h3",Ce,t(s(o)("order.delivery_info")),1),e("div",je,[e("p",null,t(n.value.shippingAddress||"No. 88, West Nanjing Road, Jing'an District, Shanghai"),1),e("p",Se,t(((b=s(V).user)==null?void 0:b.name)||"Guest"),1)])]),e("div",Ae,[e("h3",Pe,t(s(o)("order.billing_info")),1),e("div",De,[e("p",null,t(n.value.billingAddress||n.value.shippingAddress||"Same as shipping address"),1)])]),a[7]||(a[7]=e("div",{class:"h-px bg-gray-100 w-full"},null,-1)),e("div",Ve,[e("div",Me,[e("span",null,t(s(o)("cart.product_amount")),1),e("span",null,t(s(f)(n.value.totalAmount)),1)]),e("div",Ne,[e("span",null,t(s(o)("order.tax_included")),1),e("span",null,t(s(f)(n.value.totalAmount*.2)),1)]),e("div",$e,[e("span",null,t(s(o)("cart.shipping_cost")),1),e("span",null,t(s(f)(0)),1)]),e("div",Be,[e("span",null,t(s(o)("cart.amount_paid")),1),e("span",null,t(s(f)(n.value.totalAmount)),1)])]),a[8]||(a[8]=e("div",{class:"h-px bg-gray-100 w-full"},null,-1)),e("div",Ie,[e("div",Le,[e("span",null,t(s(o)("order.no")),1),e("span",null,t(n.value.id),1)]),e("div",Oe,[e("span",null,t(s(o)("order.placed")),1),e("span",null,t(L(n.value.createdAt)),1)]),e("div",Re,[e("span",null,t(s(o)("order.payment_method")),1),e("span",null,t(h(n.value)?s(o)("order.bank_transfer"):s(o)("order.online_payment")),1)]),e("div",Te,[e("span",null,t(s(o)("order.currency")),1),a[6]||(a[6]=e("span",null,"USD",-1))])]),["pending","delivered"].includes(n.value.status)?(l(),d("div",Ue,[n.value.status==="pending"?(l(),d("button",{key:0,onClick:a[0]||(a[0]=i=>u.value=!0),class:"text-sm text-red-400 hover:text-red-600 transition-colors tracking-wide"},t(s(o)("order.cancel_order")),1)):c("",!0),n.value.status==="delivered"?(l(),d("button",{key:1,onClick:a[1]||(a[1]=i=>s(D).push(`/user/orders/${n.value.id}/return`)),class:"text-sm text-red-400 hover:text-red-600 transition-colors tracking-wide"},t(s(o)("return_request.title")),1)):c("",!0)])):c("",!0),u.value?(l(),d("div",qe,[e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:a[2]||(a[2]=i=>u.value=!1)}),e("div",ze,[e("div",Fe,[e("div",Xe,[g(s(A),{class:"h-6 w-6 text-red-600"})]),e("h3",Ee,t(s(o)("order.cancel_modal.title")),1),e("p",Ge,t(s(o)("order.cancel_modal.message")),1)]),e("div",Je,[e("button",{onClick:M,class:"w-full inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"},t(s(o)("order.cancel_modal.confirm")),1),e("button",{onClick:a[3]||(a[3]=i=>u.value=!1),class:"w-full inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors"},t(s(o)("order.cancel_modal.keep")),1)])])])):c("",!0)])])):(l(),d("div",We,t(s(o)("common.loading")),1))])]}),_:1})}}});export{lt as default};
