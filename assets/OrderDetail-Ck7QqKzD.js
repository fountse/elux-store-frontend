import{P as O}from"./PersonalCenterLayout-5SC6SseK.js";import{d as R,u as T,m as U,a as v,w as y,v as q,x as w,o as l,i as e,b as _,j as x,t,f as s,g as d,h as c,n as k,y as C,F as z,r as F,l as X,k as E}from"./index-BHA_9EEM.js";import{u as G}from"./order-DP6Opxxr.js";import{u as J}from"./user-DU_8BvVJ.js";import{g as W,f as m}from"./index-BvOmRYqU.js";import{C as H,T as K,P as Q}from"./truck-B8Qh0K6-.js";import{C as j}from"./check-circle-2-DlLA8SES.js";import{A as S,X as A,C as Y}from"./x-circle-Du5nIe0M.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./cart-C8CNgBpq.js";import"./createLucideIcon-_V4BUQ3N.js";const Z={class:"flex flex-col gap-8 w-full max-w-5xl mx-auto font-sans text-text-primary"},ee={class:"flex justify-between items-center text-sm"},te={class:"text-text-secondary tracking-wide"},se={class:"text-text-primary"},ae={key:0,class:"border-b border-gray-200 dark:border-white/[0.02] pb-6"},ne={class:"flex flex-wrap items-center justify-between gap-4"},re={class:"flex flex-col"},oe={class:"text-xs text-text-tertiary uppercase tracking-wider"},le={class:"text-xl font-bold tracking-wide"},ie={class:"flex items-center gap-4"},de={class:"flex items-center gap-4"},ce={key:0,class:"px-3 py-1.5 text-sm font-bold rounded-md text-red-600 flex items-center gap-2"},ue={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-12 lg:gap-24"},pe={class:"lg:col-span-2 flex flex-col gap-8"},xe={class:"w-24 h-24 bg-surface-secondary dark:bg-black/20 flex-shrink-0"},me=["src"],fe={class:"flex-grow"},_e={class:"flex justify-between items-start"},ge={class:"font-bold text-lg tracking-wide leading-none"},ve={key:0,class:"text-sm text-text-secondary mt-1 tracking-wide"},ye={class:"text-right"},he={class:"text-sm font-bold text-text-primary"},be={class:"text-sm text-text-secondary"},we={class:"lg:col-span-1 space-y-10"},ke={class:"space-y-4"},Ce={class:"text-sm font-bold uppercase tracking-wider text-text-primary"},je={class:"text-sm text-text-secondary leading-relaxed tracking-wide space-y-2"},Se={class:"mt-4 text-text-primary"},Ae={class:"space-y-4 pt-4 border-t border-border"},Pe={class:"text-sm font-bold uppercase tracking-wider text-text-primary"},De={class:"text-sm text-text-secondary leading-relaxed tracking-wide space-y-2"},Ve={class:"space-y-3 text-sm tracking-wide"},Me={class:"flex justify-between items-center text-text-secondary"},Ne={class:"flex justify-between items-center text-text-tertiary text-xs"},$e={class:"flex justify-between items-center text-text-secondary"},Be={class:"flex justify-between items-center text-base font-bold text-text-primary pt-2"},Ie={class:"space-y-2 text-xs text-text-tertiary tracking-wide"},Le={class:"flex justify-between"},Oe={class:"flex justify-between"},Re={class:"flex justify-between"},Te={class:"flex justify-between"},Ue={key:0,class:"flex justify-end pt-4 gap-4"},qe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6"},ze={class:"relative bg-surface rounded-lg shadow-xl w-full max-w-sm transform transition-all p-6 text-center"},Fe={class:"mb-4"},Xe={class:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30 mb-4"},Ee={class:"text-lg font-bold text-text-primary mb-2"},Ge={class:"text-sm text-text-secondary"},Je={class:"mt-6 flex flex-col gap-3"},We={key:2,class:"py-12 text-center text-text-secondary"},lt=R({__name:"OrderDetail",setup(He){const{t:r}=T(),P=q(),D=X(),g=G(),V=J(),u=w(!1),M=()=>{if(n.value){n.value.status="cancelled";const o=g.orders.find(a=>{var p;return a.id===((p=n.value)==null?void 0:p.id)});o&&(o.status="cancelled")}u.value=!1},n=w(void 0);U(async()=>{const o=P.params.id;o&&(g.orders.length,n.value=g.orders.find(a=>a.id===o),n.value)});const N=o=>r(`order.tabs.${{shipped:"shipping",delivered:"completed"}[o]||o}`),$=o=>{switch(o){case"pending":return"text-warning";case"processing":return"text-info";case"shipped":return"text-purple-500";case"delivered":return"text-success";case"cancelled":return"text-error";default:return"text-text-secondary"}},B=o=>{switch(o){case"pending":return Y;case"processing":return Q;case"shipped":return K;case"delivered":return j;case"cancelled":return A;default:return S}},f=o=>{const a=o==null?void 0:o.paymentStatus;return a==="paid"||a==="unpaid"?a:(o==null?void 0:o.paymentMethod)==="postpay"?"unpaid":null},h=o=>{const a=o;return(a==null?void 0:a.paymentMethod)==="postpay"||!!(a!=null&&a.isPostpay)||!!(a!=null&&a.postpay)},I=o=>o==="paid"?"text-green-700":"text-red-600",L=o=>new Date(o).toLocaleString();return(o,a)=>{const p=E("router-link");return l(),v(O,{"bg-class":"bg-white"},{default:y(()=>{var b;return[e("div",Z,[e("div",ee,[e("div",te,[_(p,{to:"/",class:"hover:text-text-primary transition-colors"},{default:y(()=>[x(t(s(r)("nav.home")),1)]),_:1}),a[4]||(a[4]=e("span",{class:"mx-2"},"/",-1)),_(p,{to:"/user/orders",class:"hover:text-text-primary transition-colors"},{default:y(()=>[x(t(s(r)("sidebar.orders")),1)]),_:1}),a[5]||(a[5]=e("span",{class:"mx-2"},"/",-1)),e("span",se,t(s(r)("common.details")),1)])]),n.value?(l(),d("div",ae,[e("div",ne,[e("div",re,[e("span",oe,t(s(r)("order.no")),1),e("span",le,t(n.value.id),1)]),e("div",ie,[e("div",de,[h(n.value)?(l(),d("span",ce,[_(s(H),{class:"w-4 h-4"}),x(" "+t(s(r)("order.postpay")||"先发后付"),1)])):c("",!0),f(n.value)?(l(),d("span",{key:1,class:k(["px-3 py-1.5 text-sm font-bold rounded-md flex items-center gap-2",I(f(n.value))])},[(l(),v(C(f(n.value)==="paid"?s(j):s(S)),{class:"w-4 h-4"})),x(" "+t(f(n.value)==="paid"?s(r)("order.paid")||"已支付":s(r)("order.unpaid")||"待支付"),1)],2)):c("",!0)]),e("span",{class:k(["text-sm font-bold flex items-center gap-2",$(n.value.status)])},[(l(),v(C(B(n.value.status)),{class:"w-4 h-4"})),x(" "+t(N(n.value.status)),1)],2)])])])):c("",!0),n.value?(l(),d("div",ue,[e("div",pe,[(l(!0),d(z,null,F(n.value.items,i=>(l(),d("div",{key:i.productId+i.selectedVariant,class:"flex gap-6 items-start"},[e("div",xe,[e("img",{src:s(W)(i.product.images[0]),class:"w-full h-full object-cover mix-blend-multiply dark:mix-blend-normal"},null,8,me)]),e("div",fe,[e("div",_e,[e("div",null,[e("h3",ge,t(i.product.name),1),i.selectedVariant?(l(),d("p",ve,t(s(r)("common.spec"))+": "+t(i.selectedVariant),1)):c("",!0)]),e("div",ye,[e("p",he,t(s(m)(i.product.priceRetail)),1),e("span",be,"x"+t(i.quantity),1)])])])]))),128))]),e("div",we,[e("div",ke,[e("h3",Ce,t(s(r)("order.delivery_info")),1),e("div",je,[e("p",null,t(n.value.shippingAddress||"No. 88, West Nanjing Road, Jing'an District, Shanghai"),1),e("p",Se,t(((b=s(V).user)==null?void 0:b.name)||"Guest"),1)])]),e("div",Ae,[e("h3",Pe,t(s(r)("order.billing_info")),1),e("div",De,[e("p",null,t(n.value.billingAddress||n.value.shippingAddress||"Same as shipping address"),1)])]),a[7]||(a[7]=e("div",{class:"h-px bg-border w-full"},null,-1)),e("div",Ve,[e("div",Me,[e("span",null,t(s(r)("cart.product_amount")),1),e("span",null,t(s(m)(n.value.totalAmount)),1)]),e("div",Ne,[e("span",null,t(s(r)("order.tax_included")),1),e("span",null,t(s(m)(n.value.totalAmount*.2)),1)]),e("div",$e,[e("span",null,t(s(r)("cart.shipping_cost")),1),e("span",null,t(s(m)(0)),1)]),e("div",Be,[e("span",null,t(s(r)("cart.amount_paid")),1),e("span",null,t(s(m)(n.value.totalAmount)),1)])]),a[8]||(a[8]=e("div",{class:"h-px bg-border w-full"},null,-1)),e("div",Ie,[e("div",Le,[e("span",null,t(s(r)("order.no")),1),e("span",null,t(n.value.id),1)]),e("div",Oe,[e("span",null,t(s(r)("order.placed")),1),e("span",null,t(L(n.value.createdAt)),1)]),e("div",Re,[e("span",null,t(s(r)("order.payment_method")),1),e("span",null,t(h(n.value)?s(r)("order.bank_transfer"):s(r)("order.online_payment")),1)]),e("div",Te,[e("span",null,t(s(r)("order.currency")),1),a[6]||(a[6]=e("span",null,"USD",-1))])]),["pending","delivered"].includes(n.value.status)?(l(),d("div",Ue,[n.value.status==="pending"?(l(),d("button",{key:0,onClick:a[0]||(a[0]=i=>u.value=!0),class:"text-sm text-red-400 hover:text-red-600 transition-colors tracking-wide"},t(s(r)("order.cancel_order")),1)):c("",!0),n.value.status==="delivered"?(l(),d("button",{key:1,onClick:a[1]||(a[1]=i=>s(D).push(`/user/orders/${n.value.id}/return`)),class:"text-sm text-red-400 hover:text-red-600 transition-colors tracking-wide"},t(s(r)("return_request.title")),1)):c("",!0)])):c("",!0),u.value?(l(),d("div",qe,[e("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",onClick:a[2]||(a[2]=i=>u.value=!1)}),e("div",ze,[e("div",Fe,[e("div",Xe,[_(s(A),{class:"h-6 w-6 text-red-600"})]),e("h3",Ee,t(s(r)("order.cancel_modal.title")),1),e("p",Ge,t(s(r)("order.cancel_modal.message")),1)]),e("div",Je,[e("button",{onClick:M,class:"w-full inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"},t(s(r)("order.cancel_modal.confirm")),1),e("button",{onClick:a[3]||(a[3]=i=>u.value=!1),class:"w-full inline-flex justify-center rounded-md border border-border bg-surface px-4 py-2 text-sm font-medium text-text-primary hover:bg-surface-secondary focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors"},t(s(r)("order.cancel_modal.keep")),1)])])])):c("",!0)])])):(l(),d("div",We,t(s(r)("common.loading")),1))])]}),_:1})}}});export{lt as default};
